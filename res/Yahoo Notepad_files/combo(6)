YUI.add("lib-core-shell",function(c){var b={},a=0;var d=function(e){var g=this,f={panelMgr:{value:new c.lib.panelMgr(),writeOnce:true,readOnly:true}};c.augment(g,c.Attribute);g.addAttrs(f,e||{});c.augment(g,c.EventTarget);};d.prototype={loadPerspective:function(g,e){var h=this,f=h.get("panelMgr");_name="perspective-"+g;if(g){if(!b[_name]){c.log("Loading and Showing perspective..."+_name);c.use(_name,function(i){b[_name]=new i.perspective[g](e||{});b[_name]._pIdx=a++;b[_name]._name=g;b[_name]._panels=[];b[_name].addPanel=function(j,l){var k;if(!f.get(j)){f.set(j,l);}k=f.get(j);b[_name]._panels.push(k);return k;};b[_name].load();});}else{c.log("Showing perspective..."+_name);b[_name].load();}}},unloadPerspective:function(h){var m=this,f=/perspective-/.test(h)?h:"perspective-"+h,e,k,g=0,l=0;if(h&&b[f]){for(var j=0,g=b[f]._panels.length;j<g;j++){e=b[f]._panels[j];k=e.getModule();k&&k.after("close",function(i){l=l+1;});e.removeModule();}if(g==l){c.log("Unloading perspective..."+f);b[f].unload&&b[f].unload();delete b[f];}}},resetPerspectives:function(){var g=this,f=c.Object.values(b),e;f.sort(function(i,h){return(h._pIdx-i._pIdx);});for(e=0;e<f.length;e++){g.unloadPerspective(f[e]._name);}g.get("panelMgr").resetPanels();}};c.namespace("lib");c.lib.shell=d;},"1.0.0",{requires:["attribute","event-base","lib-core-panel-mgr"]});YUI.add("calendar-model-component",function(b){var a=function(c){var e=this,d={uid:{value:""},summary:{value:"",setter:function(f){if(b.Lang.trim(f)==""){return"[no title]";}else{return f.replace("&#39;","'");}}},description:{value:""},folder:{value:{}}};b.augment(e,b.Attribute);e.addAttrs(d,c||{});};b.namespace("calendar.model");b.calendar.model.Component=a;},"1.0.0",{requires:["attribute-base","event-base"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-parse-simple",function(e,t){var n=e.namespace("QueryString");n.parse=function(e,t,r){t=t||"&",r=r||"=";for(var i={},s=0,o=e.split(t),u=o.length,a;s<u;s++)a=o[s].split(r),a.length>0&&(i[n.unescape(a.shift())]=n.unescape(a.join(r)));return i},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"3.11.0",{requires:["yui-base"]});
YUI.add("lib-net",function(f){var c={};var b=function(g,h){f.log("Net Success handler Id..."+g);c[g]&&c[g].success&&c[g].success(h);};var e=function(g,h){f.log("Net Failure handler Id..."+g);f.fire("fault",{host:"net",severity:1,details:h});h.requestedURL=(c[g]&&c[g].url)?c[g].url:null;h.requestedOp=(c[g]&&c[g].reqOp)?c[g].reqOp:null;c[g]&&c[g].failure&&c[g].failure(h);};var a=function(g){delete c[g];};f.on("io:success",b);f.on("io:failure",e);f.on("io:end",a);f.on("io:abort",a);var d=function(h){var i=this;function g(l,j){var k=f.mix(j||{},{method:"GET"}),m;l=Config.pathPrefix+l;m=f.io(l+"&rand="+(new Date()).getTime()+"&prog=aeon",k);k.url=l;k.reqOp=k.method;c[m.id]=k;f.log("Initiating request; Id: "+m.id+" Url: "+l);return m;}f.mix(i,{exec:g});};f.namespace("lib");f.lib.Net=d;},"1.0.0",{requires:["io"]});YUI.add("common-utils",function(e){e.namespace("common.Utils");var b=e.common.Utils,d=e.Object,c=e.Lang,a=c.trim,f=/{{([^{}]*)}}/g;e.mix(b,{isEmpty:function(h){var g;if(h){for(g in h){return false;}}return true;},size:function(j){var g,h=0;for(g in j){h++;}return h;},congruent:function(i,h,g,k){var j=((i===h)||(g||(b.size(i)==b.size(h))));if(c.isString(i)){j=(i===h);}if(j&&(i!=h)){d.some(i,function(m,l){j=(k&&!!k[l])||(c.isObject(m)?b.congruent(m,h[l],g):(m==h[l]));return !j;},null,true);}return j;},diff:function(j,i,h){var g,k=h?j:b.merge({},j);if(i){d.each(k,function(m,l){g=c.isObject(m)?b.diff(m,i[l],true):(m!=i[l]);if(!g){delete k[l];}},null,true);}return(!b.isEmpty(k)||(j&&!i))&&k;},wcopy:function(j,g){var l=j&&(j.length||(j.length===0))&&Object.prototype.toString.call(j)=="[object Array]",h,k=j?(l?e.clone(j):e.Object(j)):j;g=g||{};if(!l){for(h in k){if((typeof k[h]=="object")&&k[h]){k[h]=g[h]?j[h]:b.wcopy(k[h]);}}}return k;},merge:function(o,n,m,j){var k,h,g;if(c.isObject(n)){o=(c.isObject(o)&&o)||{};for(k in n){if(j&&!n.hasOwnProperty(k)){continue;}if(c.isArray(n[k])){h=n[k];if(!o[k]||m){o[k]=[];}for(g=0;g<h.length;g++){o[k].push(b.merge(o[k][g],h[g],m,j));}}else{if(c.isObject(n[k])){if(!o[k]){o[k]={};}o[k]=b.merge(o[k],n[k],m,j);}else{if((m&&(o[k]!=n[k]))||c.isUndefined(o[k])){o[k]=n[k];}}}}}else{o=n;}return o;},assert:function(h,i,g,j){if(!h){i=i||"assertfail";e.log(i);e.use("common-utils-error",function(){var k=(j&&j())||"";b.error.report(i+" "+k,1,g);});}},substitute:function(m,l,i,h,g,k,j){if(typeof m!=="string"){return;}if(j){m=j.str||m;l=j.obj||l;i=j.formatters||i;h=j.args||h;g=j.strings||g;k=j.templates||k;}return m.replace(f,function(o,n){var q,p,r=b.substitute;if(i&&(q=(j&&j.formatters)?j.formatters[n]:i[n])){return(q(l,h,j))||"";}else{if(l&&n in l){p=l[n];return typeof p==="string"&&p.match(f)?r(p,l,i,h,g,k,j):p;}else{if(g&&n in g){p=g[n];return p.match(f)?r(p,l,i,h,g,k,j):p;}else{if(k&&n in k){return r(k[n].base||k[n],l,i,h,g,k,j);}else{return"";}}}}});},regexpEscape:function(g){if(g==null){return null;}g=""+g;return g.replace(/([\^\/.*+?|()[\]{}\\=!:$])/g,"\\$1");},escapeHtml:function(h,g){if(h==null){return null;}h=""+h;h=h.replace(/&/g,"&amp;");h=h.replace(/</g,"&lt;");h=h.replace(/>/g,"&gt;");h=h.replace(/\"/g,"&quot;");h=h.replace(/\'/g,"&#39;");h=h.replace(/\\/g,"&#92;");h=h.replace(/&(?:amp;)+/g,"&amp;");if(g){h=h.replace(/&amp;#([A-Za-z0-9]+);/g,"&#$1;");}return h;},unescapeHtml:function(g){if(g==null){return null;}g=""+g;g=g.replace(/&amp;/g,"&");g=g.replace(/&lt;/g,"<");g=g.replace(/&gt;/g,">");g=g.replace(/&quot;/g,'"');g=g.replace(/&#39;/g,"'");g=g.replace(/&#92;/g,"\\");return g;},escapeStringField:function(g){return b.escapeHtml(b.unescapeHtml(g));},escapeEmailObject:function(g){return{email:b.escapeStringField(g.email),name:b.escapeStringField(g.name)};},escapeEmailObjectArray:function(k){var g=k.length,h=[],j=0;for(;j<g;j++){h.push(b.escapeEmailObject(k[j]));}return h;},removeHtml:function(g){if(g==null){return null;}g=""+g;g=g.replace(/<[^>]*>/g,"");return g;},getDataAction:function(k){var j=k.target,i=k.currentTarget,g=j.ancestor(function(l){return l.getAttribute("data-action")||l===i;},true),h=g?g.getAttribute("data-action"):0;return{node:g,action:h};},dateFormatter:function(h,g){if(Neo&&Neo.dateFormatter){return Neo.dateFormatter(h,g);}return"";},triggerDarla:function(g,h){!NeoConfig.noDarla&&e.use("mail-ui-darla",function(j){var i=j.mail.ui.darla;i&&i.trigger(g,h);});},loadDarlaAndExecute:function(g,h){if(h){e.use("darla-base","mail-ui-darla",function(){g(e);e.use("mail-track");});}else{e.use("darla-base","mail-ui-darla","mail-track",function(){g(e);});}},parseQueryString:function(g){var h,i={};g=g||window.location.search.replace(/^\?/,"");if(g&&g.length>1){h=g.split("?");i=e.QueryString.parse(h.length>1?h[1]:h[0]);}return i;},sanitizeString:function(h){var g=/[\u0000-\u001f\u007f]/g;return typeof h==="string"?a(h.replace(g,"")):h;},mergeQueryString:function(h,i){var g;if(e.Lang.isObject(i)){g=h.replace(/\?.*$/,"");i=e.merge(b.parseQueryString(h),i);h=g+"?"+e.QueryString.stringify(i);}return h;},setSelect:function(h,g){if(typeof h.addClass!=="undefined"){h=[h];}e.Array.each(h,function(i){var j=e.Node.getDOMNode(i);if(typeof j.onselectstart!=="undefined"){j.onselectstart=function(){if((window.event.srcElement||window.event.target).tagName==="INPUT"){return true;}else{return g;}};}else{if(typeof j.style.MozUserSelect!=="undefined"){j.style.MozUserSelect=g?"inherit":"-moz-none";}else{j.onmousedown=function(){return g;};}}});},onDemand:function(g,h){return function(){var j=this,i=arguments;e.use(h,function(){j[g].apply(j,i);});};},escapeRegexp:function(h){var g=/([\[|\]|\(|\)|])/g;return h.replace(g,"\\$1");},simulateContextMenu:function(k,h){var i,g=2,j,l;if(!k){return false;}k=(k._node)?k._node:k;if(k.ownerDocument.createEvent){j=e.one(k);l=j.getXY();if(h!==false&&(l[1]-e.DOM.docScrollY())<0){j.scrollIntoView();l=j.getXY();}l[1]-=e.DOM.docScrollY();i=k.ownerDocument.createEvent("MouseEvents");i.initMouseEvent("contextmenu",true,true,k.ownerDocument.defaultView,1,0,0,l[0],l[1],false,false,false,false,g,null);return !k.dispatchEvent(i);}else{if(k.ownerDocument.createEventObject){i=k.ownerDocument.createEventObject();i.button=g;return k.fireEvent("oncontextmenu",i);}}return false;},isBrowserCORSCapable:function(){return(("withCredentials" in new XMLHttpRequest())||typeof XDomainRequest!=="undefined");},convertToPlain:function(g){var h=document.createElement("div");h.innerHTML=g;return h.textContent||h.innerText;},makeHttpsUrl:function(g){if(g&&typeof g=="string"){g=g.replace(/^http:/,"https:");g=g.replace(/:80\//,":443/");}return g;}});if(NeoConfig&&NeoConfig.intl==="jp"){e.use("common-utils-jp");}},"1.0.0",{requires:["querystring-parse-simple"]});YUI.add("comms-ui-dialog-base",function(g){var e=g.Node,c=e.one,f,d;function a(h){var i=h.get("id");if(!i){i=g.stamp(h);h.set("id",i);}return i;}function b(q){q=q||{};q.visible=q.visible||0;q.zIndex=q.zIndex||15500;var p=this,t=q.contentBox||null,u=q.template||null,j=q.cssPrefix||null,h=q.focusedNode||null,l=q.clearMask||false,s=q.hideMask||false,r=q.restoreFocusNode,i=q.suppressRestoreFocus||false,k=q.suppressActive,n=q.maskId||null,m=q.noScroll||false,o=q.disableEsc||false;this._evt=[];if(!t&&u){p.CONTENT_TEMPLATE=u;}b.superclass.constructor.apply(this,arguments);if(!d&&k){if(f){d=f;f.set("visible",false);}else{k=false;}}p.addAttrs({cssPrefix:{value:j,readOnly:true},focusedNode:{value:h},clearMask:{value:l},hideMask:{value:s},restoreFocusNode:{valueFn:function(){var v=r;if(!((v instanceof g.Node)||g.Lang.isNull(v))){v=document.activeElement;}return v;}},suppressRestoreFocus:{value:i},suppressActive:{value:k,readOnly:true},maskId:{value:n},noScroll:{value:m},disableEsc:{value:o}});}b.NAME="dialog";b.CSS_PREFIX="yui3-overlay";b.ATTRS={role:{value:"dialog"}};g.extend(b,g.Overlay,{maskEl:null,prevMaskElId:null,centerEl:null,_haltShow:false,initializer:function(){this.set("visible",false);this.on("render",this.onBeforeRender);},destructor:function(){var j,k=this.get("restoreFocusNode"),m=this.get("suppressRestoreFocus"),h=this.get("contentBox").get("id");this.get("boundingBox").purge(true);if(this.get("centered")){this.centerEl&&this.centerEl.remove(true);}else{this.get("boundingBox").remove(true);}if(this.get("noScroll")){g.one("body").setStyle("overflow","visible");}for(j in this._evt){g.detach(this._evt[j]);}if(!this._haltShow){if(d&&this.get("suppressActive")){d.set("visible",true);d=null;this.prevMaskElId&&this.maskEl&&this.maskEl.set("id",this.prevMaskElId);this.prevMaskElId=null;}else{if(this.get("maskId")){this.maskEl.remove(true);}else{this.maskEl&&this.maskEl.setStyle("display","none");}f=null;if(!m){try{if(!(g.Lang.isNull(k)||k.tagName=="IFRAME")){k.focus();}}catch(l){}}g.fire("dialog:hide",h);}}else{this._haltShow=false;}},renderUI:function(){var o=this.get("cssPrefix"),j=this.get("contentBox"),n=this.get("role"),h,m,l,i,k;j.set("role",n);if(o){h=["#"+j.get("id")," .",o].join("");l=g.one(h+"-hd");i=g.one(h+"-bd");k=g.one(h+"-ft");if(l){j.set("aria-labelledby",a(l));if((m=l.one(".close"))){m.set("role","presentation");}if(!l.hasClass("yui3-widget-hd")){l.addClass("yui3-widget-hd");}}if(i){if(n==="alertdialog"||n==="dialog"){j.set("aria-describedby",a(i));}if(!i.hasClass("yui3-widget-bd")){i.addClass("yui3-widget-bd");}}if(k){if(!k.hasClass("yui3-widget-ft")){k.addClass("yui3-widget-ft");}}}j.setStyle("display","block");j.set("tabIndex",0);j.all(".btn a").each(function(q,p){q.set("role","button");});},show:function(){if(!f){b.superclass.show.call(this);!this.get("suppressActive")&&g.fire("dialog:show",this);if(this.get("noScroll")){g.one("body").setStyle("overflow","hidden");}}else{this._haltShow=true;this.destroy();}},bindUI:function(){var m=g.all(".yui3-overlay-content .btn a"),h=m.size()-1,k=g.one(".yui3-overlay-content"),n=this.get("focusedNode"),j;if(this.get("centered")){this.after("renderedChange",this.center);}this._evt.push(this.after("visibleChange",function(){var p={display:"none"},o=this.get("contentBox");if(this.get("visible")){o&&o.setStyle("display","block");p.display=this.get("hideMask")?"none":"block";f=this;}else{o&&o.setStyle("display","none");f=null;}this.maskEl&&this.maskEl.setStyles(p);if(f){l(true);}}));function l(p){if(!f){return;}if(!(n instanceof g.Node)){p&&g.UA.gecko&&k.focus();n=k.one(n);}try{if(n){n.focus();}else{k.focus();}}catch(o){}}this._evt.push(k.on("blur",function(){j=true;}));this._evt.push(k.on("focus",function(p){var o="#"+k.get("id");if(j&&!p.target.ancestor(o,true)){l();}j=false;}));function i(q){var o,p=q.target;switch(q.keyCode){case 8:case 46:return;break;case 9:if(h>-1){if(q.shiftKey){if(k==p){q.halt();m.item(h).focus();}}else{if(m.item(h)==p){q.halt();k.focus();}}}break;case 27:if(!this.get("disableEsc")){this.fire("dialog:action",{dataAction:"cancel"});q.preventDefault();}break;case 32:if(p.getAttribute("role")=="button"){q.preventDefault();g.use("node-event-simulate",function(){p.simulate("click");});}break;case 37:case 39:if((h>0)&&(o=m.indexOf(p))>-1){if(q.keyCode==37){m.item((o==0)?h:o-1).focus();}else{m.item((o==h)?0:o+1).focus();}}break;}q.stopPropagation();}k.on("keydown",i,this);},onBeforeRender:function(n){var o=this.get("zIndex"),h=this.get("hideMask"),k=this.get("clearMask"),p=this.getClassName((k?"clearmask":"mask")),i="position:fixed;top:50%;left:50%;height:1px;",j,l=this.get("maskId"),m,q;if(l){this.maskEl=c("#"+l);}if(!this.maskEl){if(!l){l=g.guid();}if(!(this.maskEl=g.one("."+p))&&!h){m=['<DIV id="',l,'" class="',p,'" style="z-index:',(o-2),'"></DIV>'].join(""),c("body").prepend(m);this.maskEl=c("#"+l);}else{if(this.maskEl){this.prevMaskElId=this.maskEl.get("id");this.maskEl.set("id",l);this.maskEl.setStyle("zIndex",o-2);}}}if(this.get("centered")){j=g.guid();q=['<DIV id="',j,'" style="',i,"z-index:",(o-1),'"></DIV>'].join("");c("body").prepend(q);this.centerEl=g.one("#"+j);n.parentNode=this.centerEl;this.get("boundingBox").setStyle("position","relative");}},center:function(){var i,j,h=this.get("boundingBox");i=-(h.get("offsetWidth")/2)+"px";j=-(h.get("offsetHeight")/2)+"px";h.setStyles({marginLeft:i,top:j,left:0});}});g.namespace("comms.ui");g.comms.ui.Dialog=b;},"0.0.1",{requires:["overlay"]});YUI.add("_shared_module_offscreen_bin_modal_close_icon",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_offscreen_bin_modal_close_icon={base:'<span class="icon close" data-action="cancel" title="{{str_btn_close}}"></span>'};},"1.0.0");YUI.add("_shared_module_offscreen_bin_modal",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_offscreen_bin_modal={base:'<div id="modalOverlay" class="modal {{modal_classes}}"> <h2 class="modal-hd"> {{modal_header}} {{_shared_module_offscreen_bin_modal_close_icon}} </h2> <div class="frontpanel"> <div class="modal-bd">{{modal_body}}</div> <div class="modal-ft">{{modal_ft}}</div> </div> {{modal_back_panel}}</div>',modal_back_panel:'<div class="backpanel back hidden"> <div class="modal-bd">{{modal_body_back}}</div> <div class="modal-ft">{{modal_ft_back}}</div> </div> '};},"1.0.0",{requires:["_shared_module_offscreen_bin_modal_close_icon"]});YUI.add("_shared_module_offscreen_bin_modal_btn_ok",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_offscreen_bin_modal_btn_ok={base:'<span id="okayModalOverlay" class="btn left right default"><a href="#" data-action="ok">{{str_ok}}</a></span> '};},"1.0.0");YUI.add("common-ui-dialog-helper",function(c){var a=c.common.Utils.substitute,b=c.ui.Templates,d="alertdialog";c.namespace("common.ui");c.common.ui.DialogHelper=new function(){var g={modal_header:function(l){return l.hd;},modal_body:function(l){return l.bd;},modal_ft:function(l){return a(l.ft,0,0,0,strings);},_shared_module_offscreen_bin_modal_btn_ok:function(l){return l.ok;},_shared_module_offscreen_bin_modal_btn_cancel:function(l){return l.cancel;},_shared_module_offscreen_bin_modal_close_icon:function(l){return(l.hideClose)?"":a(b._shared_module_offscreen_bin_modal_close_icon.base,0,0,0,strings);},global_path_img:function(){return NeoConfig.globalPathImg+"/u/assets/img";},antivirus_logo_path_img:function(){return NeoConfig.avLogoUrl;}};function k(m,n,l){m.ft=b._shared_module_offscreen_bin_modal_btn_ok.base||"";m.role=d;if(n&&n.ok&&n.ok.text){m.ft=a(m.ft,0,0,0,{str_ok:n.ok.text});}e(m,n,l);}function j(m,n,l){c.use("_shared_module_offscreen_bin_modal_btn_cancel",function(){var o={cancel:b._shared_module_offscreen_bin_modal_btn_cancel.base};m.ft=a(b._shared_module_offscreen_bin_modal_btn_cancel.base,o,g,0,strings);m.focusedNode='.modal-ft [data-action="cancel"]';m.role=d;e(m,n,l);});}function f(m,n,l){c.use("_shared_module_offscreen_bin_modal_btns_ok_cancel",function(){var o={ok:b._shared_module_offscreen_bin_modal_btn_ok.base,cancel:b._shared_module_offscreen_bin_modal_btn_cancel.base};if(n&&n.ok&&n.ok.text){o.ok=a(o.ok,0,0,0,{str_ok:n.ok.text});}m.ft=a(b._shared_module_offscreen_bin_modal_btns_ok_cancel.base,o,g,0,strings);m.role=d;e(m,n,l);});}function i(m,n,l){m.ft=a(m.ft,0,g,0,strings);e(m,n,l);}function e(m,n,l){m=m||{};if(!m.template){var p=m.rawTemplate||b._shared_module_offscreen_bin_modal.base;m.template=a(p,m,g,0,strings);}m.centered=true;m.cssPrefix="modal";m.focusedNode=m.focusedNode||".yui3-widget-ft span.default a";function o(q){q.get("contentBox").set("aria-live","polite");q.show();if(l){l(q);}}h(m,n,o);}function h(m,o,l){var n=new c.comms.ui.Dialog(m);o=o||{};n.render();n.get("contentBox").on("click",function(r){var s=c.common.Utils.getDataAction(r),q=s.action,p=s.node;if(q){if(!m.allowDefault){r.preventDefault();}if(NeoConfig.intl==="jp"){n.set("adAction",(q=="ok"?"disableRetriggerOnOk":"disableRetriggerOnHide"));}n.fire("dialog:action",{dataAction:q,item:p});}});n.after("dialog:action",function(s){var q=s.dataAction,p;if(q){p=o[q];try{if(!p||!p.stopDestroy){n.destroy();}p&&p.handler&&p.handler.call(this,s,n);}catch(r){}}});if(l){l(n);}}c.mix(this,{alert:k,cancelDialog:j,confirm:f,create:h,custom:i,createCommon:e});};},"1.0.0",{requires:["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]});YUI.add("lib-utils",function(e){e.namespace("lib.Utils");var b=e.lib.Utils,d=e.Object,c=e.Lang,a=c.trim;e.mix(b,{isEmpty:function(g){var f;if(g){for(f in g){return false;}}return true;},size:function(g){var f=0;for(k in g){f++;}return f;},congruent:function(h,g,f){var i=((h===g)||(f||(b.size(h)==b.size(g))));if(i&&(h!=g)){d.some(h,function(l,j){i=c.isObject(l)?b.congruent(l,g[j],f):(l==g[j]);return !i;},null,true);}return i;},diff:function(i,h,g){var f,j=g?i:b.merge({},i);if(h){d.each(j,function(m,l){f=c.isObject(m)?b.diff(m,h[l]||{},true):(m!=h[l]);if(!f){delete j[l];}},null,true);}return !b.isEmpty(j)&&j;},wcopy:function(h,f){var l=c.isArray(h),g,j=h?(l?e.clone(h):e.Object(h)):h;f=f||{};if(!l){for(g in j){if(!c.isFunction(j[g])&&c.isObject(j[g])){j[g]=f[g]?h[g]:b.wcopy(j[g]);}}}return j;},merge:function(n,q,f,p,o){var m,j,h,g;if(c.isObject(q)){n=(c.isObject(n)&&n)||{};for(m in q){if(p&&!q.hasOwnProperty(m)){continue;}if(c.isArray(q[m])){h=q[m];if(!n[m]||f){n[m]=[];}for(g=0;g<h.length;g++){n[m].push(b.merge(n[m][g],h[g],f,p));}}else{if(c.isObject(q[m])){if(!n[m]){n[m]={};}n[m]=b.merge(n[m],q[m],f,p);}else{if((f&&(n[m]!=q[m]))||c.isUndefined(n[m])){n[m]=q[m];}}}}}else{n=q;}return n;},assert:function(f,g){if(!f){e.log(g||"invalid parameter");}},substitute:function(n,m,h,g,f,j,i){var l=/{{([^{}]*)}}/g;if(typeof n!=="string"){return;}if(i){n=i.str||n;m=i.obj||m;h=i.formatters||h;g=i.args||g;f=i.strings||f;j=i.templates||j;}return n.replace(l,function(p,o){var r,q,s=e.lib.Utils.substitute;if(h&&(r=(i&&i.formatters)?i.formatters[o]:h[o])){return(r(m,g,i))||"";}else{if(m&&o in m){q=m[o];return typeof q==="string"&&q.match(l)?s(q,m,h,g,f,j,i):q;}else{if(f&&o in f){q=f[o];return q.match(l)?s(q,m,h,g,f,j,i):q;}else{if(j&&o in j){return s(j[o].base||j[o],m,h,g,f,j,i);}else{return"";}}}}});},regexpEscape:function(f){if(f==null){return null;}f=""+f;return f.replace(/([\^\/.*+?|()[\]{}\\])/g,"\\$1");},escapeHtml:function(f){if(f==null){return null;}f=""+f;f=f.replace(/&/g,"&amp;");f=f.replace(/</g,"&lt;");f=f.replace(/>/g,"&gt;");f=f.replace(/\"/g,"&quot;");f=f.replace(/\'/g,"&#39;");f=f.replace(/\\/g,"&#92;");f=f.replace(/&(?:amp;)+/g,"&amp;");return f;},unescapeHtmlUnicode:function(f){return b.unescapeHtml(e.Node.create("<div>"+f+"</div>").getContent());},unescapeHtml:function(f){if(f==null){return null;}f=""+f;f=f.replace(/&[^;]*;/g,function(g){switch(g){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&#39;":return"'";case"&#92;":return"\\";default:return"";}});return f;},stripOuterDiv:function(f){return f.replace(/^<div[^>]*>/gi,"").replace(/<\/div[^>]*>$/gi,"");},getDataAction:function(j){var i=j.target,h=j.currentTarget,f=i.ancestor(function(l){return l.getAttribute("data-action")||l===h;},true),g=f?f.getAttribute("data-action"):0;return{node:f,action:g};},parseQueryString:function(f){var g,h={};f=f||window.location.search.replace(/^\?/,"");if(f&&f.length>1){g=f.split("?");h=e.QueryString.parse(g.length>1?g[1]:g[0]);}return h;},createAddress:function(m){var f=false,h=null,g=null,j=/(<[^<>]+@[^<>]+\.[^<>]+>)|(\([^\(\)]+@[^\(\)]+\.[^\(\)]+\))|(\[[^\[\]]+@[^\[\]]+\.[^\[\]]+\])/,l,i=m.replace(/\".*\"/g,"");if(!a(i)||i.indexOf("@")<0){return{fail:true,email:m,name:b.escapeHtml(m)};}if(j.test(m)){l=m.match(j);g=l[0];h=a(m.replace(g,""));g=g.substring(1,g.length-1);}else{g=h=a(m);}if(!b.isValidEmail(g)){f=true;}return{fail:f,email:g,name:b.escapeHtml(h)};},isValidDomain:function(f){var j=/^([^@ ;:()\[\],<>\\ #$*!\&]+\.[^@ ;:()\[\],<>\\ #$*!\&]+)$/,h=f.split("."),g;if(!j.test(f)){return false;}for(g=0;g<h.length;g++){if(!h[g]){return false;}}return true;},isValidEmail:function(g){var l,j,f,h;var i=/^([^@ ;:()\[\],<>\\]+@[^@ ;:()\[\],<>\\]+\.[^@ ;:()\[\],<>\\]+)$/;if(!i.test(g)){return false;}h=g.split("@");l=h[0];j=h[1];if(!j||!l){return false;}h=j.split(".");f=h[1];if(!f){return false;}return g;},addModule:function(l,j,g,h){var f=e.options.shell.get("panelMgr"),i;if(!f.get(l)){f.set(l,j);}i=f.get(l);i.addModule(g,i.getModule(g)||h);return{panel:i,module:i.getModule(g)};},getYIDFromEmailAddress:function(f){if(f.indexOf("@yahoo.cn")!=-1||f.indexOf("@yahoo")==-1){return f;}return f.substring(0,f.indexOf("@"));},loadScript:function(g,h){var f=document.createElement("script");f.type="text/javascript";if(f.readyState){f.onreadystatechange=function(){if(f.readyState=="loaded"||f.readyState=="complete"){f.onreadystatechange=null;h();}};}else{f.onload=function(){h();};}f.src=g;document.getElementsByTagName("head")[0].appendChild(f);},cleanupCookie:function(){var f=document.cookie,j=f.length,p,q=[],g={},n,l,m,h,o;if(j>7000){p="YC.ZP";q=f.split(";");g={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({yid:Config.yid,msg:"Cookie: "+f}),success:function(){},failure:function(){}};o=new e.lib.Net().exec(Config.docRoot+"log?wssid="+Config.crumb,g);for(n=0;n<q.length;n++){l=q[n];if(l.indexOf(p)===0){m=l.split("=")[0];h=new Date().addDays(-1);document.cookie=m+"=;expires="+h+";;";}}}},relogin:function(){var h=strings.str_cfg_url_yahoo_relogin,i=e.lib.Utils.substitute(strings.str_error_title,null,null,null,strings),g={hd:i,bd:'<div class="dlg-error">'+strings.str_error_relogin+"</div>",suppressActive:true,maskId:"opaque-overlay",noScroll:true,hideClose:true,disableEsc:true};reloginwnd=null;if(Config.cfg.isCorp&&Config.isInternal){h=h.replace(/\?/,"?.partner=ycorp&");h=h.replace(".src=yc",".src=ym");h+=encodeURIComponent("https://calendar.yahoo.com/?relogin");}else{h+=encodeURIComponent("https://calendar.yahoo.com/?relogin");}window.reloginCallback=function(l,j){relogindlg&&relogindlg.destroy();reloginwnd=relogindlg=null;if(Config.yid==l){Config.crumb=j;}else{window.location="https://calendar.yahoo.com";}};if(typeof relogindlg!=="undefined"&&relogindlg){return;}var f=e.common.ui.DialogHelper;f.alert(g,{ok:{handler:function(){if(reloginwnd){reloginwnd.close();}reloginwnd=window.open(h,"_blank","height=650,width=850,resizable,scrollbars=yes");},stopDestroy:true,text:strings.str_error_signin}},function(j){relogindlg=j;});},makeURL:function(f){var g=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig;return f.replace(g,function(h){return'<a href="'+h+'" target="_blank">'+h+"</a>";});},lookupTimeZoneStrings:function(f){var g={"Etc/GMT+12":strings.str_cal_tz_gmt_1200,"Pacific/Midway":strings.str_cal_tz_gmt_1100,"Pacific/Honolulu":strings.str_cal_tz_gmt_1000,"Pacific/Marquesas":strings.str_cal_tz_gmt_0930,"America/Anchorage":strings.str_cal_tz_gmt_0900,"Pacific/Pitcairn":strings.str_cal_tz_gmt_0800_3,"America/Los_Angeles":strings.str_cal_tz_gmt_0800_1,"America/Tijuana":strings.str_cal_tz_gmt_0800_2,"America/Chihuahua":strings.str_cal_tz_gmt_0700_1,"America/Denver":strings.str_cal_tz_gmt_0700_2,"America/Phoenix":strings.str_cal_tz_gmt_0700_3,"America/Chicago":strings.str_cal_tz_gmt_0600_1,"America/Guatemala":strings.str_cal_tz_gmt_0600_2,"America/Mexico_City":strings.str_cal_tz_gmt_0600_3,"America/Regina":strings.str_cal_tz_gmt_0600_4,"America/Bogota":strings.str_cal_tz_gmt_0500_1,"America/Indiana/Indianapolis":strings.str_cal_tz_gmt_0500_2,"America/New_York":strings.str_cal_tz_gmt_0500_3,"America/Caracas":strings.str_cal_tz_gmt_0400_1,"America/Guyana":strings.str_cal_tz_gmt_0400_2,"America/Halifax":strings.str_cal_tz_gmt_0400_3,"America/La_Paz":strings.str_cal_tz_gmt_0400_4,"America/Manaus":strings.str_cal_tz_gmt_0400_5,"America/Santiago":strings.str_cal_tz_gmt_0400_6,"America/St_Johns":strings.str_cal_tz_gmt_0330,"America/Argentina/Buenos_Aires":strings.str_cal_tz_gmt_0300_1,"America/Godthab":strings.str_cal_tz_gmt_0300_2,"America/Montevideo":strings.str_cal_tz_gmt_0300_3,"America/Sao_Paulo":strings.str_cal_tz_gmt_0300_4,"Atlantic/South_Georgia":strings.str_cal_tz_gmt_0200,"Atlantic/Azores":strings.str_cal_tz_gmt_0100_1,"Atlantic/Cape_Verde":strings.str_cal_tz_gmt_0100_2,"Africa/Casablanca":strings.str_cal_tz_gmt_1,"Africa/Monrovia":strings.str_cal_tz_gmt_2,"Europe/London":strings.str_cal_tz_gmt_3,"Etc/GMT":strings.str_cal_tz_gmt_2,"Africa/Algiers":strings.str_cal_tz_gmt0100_1,"Africa/Windhoek":strings.str_cal_tz_gmt0100_2,"Europe/Belgrade":strings.str_cal_tz_gmt0100_3,"Europe/Berlin":strings.str_cal_tz_gmt0100_4,"Europe/Brussels":strings.str_cal_tz_gmt0100_5,"Europe/Warsaw":strings.str_cal_tz_gmt0100_6,"Africa/Cairo":strings.str_cal_tz_gmt0200_1,"Africa/Harare":strings.str_cal_tz_gmt0200_2,"Asia/Amman":strings.str_cal_tz_gmt0200_3,"Asia/Beirut":strings.str_cal_tz_gmt0200_4,"Asia/Jerusalem":strings.str_cal_tz_gmt0200_5,"Europe/Athens":strings.str_cal_tz_gmt0200_6,"Europe/Helsinki":strings.str_cal_tz_gmt0200_7,"Europe/Minsk":strings.str_cal_tz_gmt0200_8,"Africa/Nairobi":strings.str_cal_tz_gmt0300_1,"Asia/Baghdad":strings.str_cal_tz_gmt0300_2,"Asia/Kuwait":strings.str_cal_tz_gmt0300_3,"Europe/Moscow":strings.str_cal_tz_gmt0300_4,"Asia/Tehran":strings.str_cal_tz_gmt0330,"Asia/Baku":strings.str_cal_tz_gmt0400_1,"Asia/Muscat":strings.str_cal_tz_gmt0400_2,"Asia/Tbilisi":strings.str_cal_tz_gmt0400_3,"Asia/Yerevan":strings.str_cal_tz_gmt0400_4,"Asia/Kabul":strings.str_cal_tz_gmt0430,"Asia/Karachi":strings.str_cal_tz_gmt0500_1,"Asia/Tashkent":strings.str_cal_tz_gmt0500_2,"Asia/Yekaterinburg":strings.str_cal_tz_gmt0500_3,"Asia/Colombo":strings.str_cal_tz_gmt0530_1,"Asia/Kolkata":strings.str_cal_tz_gmt0530_2,"Asia/Kathmandu":strings.str_cal_tz_gmt0545,"Asia/Dhaka":strings.str_cal_tz_gmt0600_1,"Asia/Novosibirsk":strings.str_cal_tz_gmt0600_2,"Asia/Rangoon":strings.str_cal_tz_gmt0630,"Asia/Bangkok":strings.str_cal_tz_gmt0700_1,"Asia/Krasnoyarsk":strings.str_cal_tz_gmt0700_2,"Asia/Hong_Kong":strings.str_cal_tz_gmt0800_1,"Asia/Irkutsk":strings.str_cal_tz_gmt0800_2,"Asia/Kuala_Lumpur":strings.str_cal_tz_gmt0800_3,"Asia/Taipei":strings.str_cal_tz_gmt0800_4,"Australia/Perth":strings.str_cal_tz_gmt0800_5,"Asia/Seoul":strings.str_cal_tz_gmt0900_1,"Asia/Tokyo":strings.str_cal_tz_gmt0900_2,"Asia/Yakutsk":strings.str_cal_tz_gmt0900_3,"Australia/Adelaide":strings.str_cal_tz_gmt0930_1,"Australia/Darwin":strings.str_cal_tz_gmt0930_2,"Asia/Vladivostok":strings.str_cal_tz_gmt1000_1,"Australia/Brisbane":strings.str_cal_tz_gmt1000_2,"Australia/Hobart":strings.str_cal_tz_gmt1000_3,"Australia/Sydney":strings.str_cal_tz_gmt1000_4,"Pacific/Guam":strings.str_cal_tz_gmt1000_5,"Australia/Lord_Howe":strings.str_cal_tz_gmt1030,"Asia/Magadan":strings.str_cal_tz_gmt1100,"Pacific/Norfolk":strings.str_cal_tz_gmt1130,"Pacific/Auckland":strings.str_cal_tz_gmt1200_1,"Pacific/Fiji":strings.str_cal_tz_gmt1200_2,"Pacific/Tongatapu":strings.str_cal_tz_gmt1300};if(f in g){return g[f];}else{return null;}},dateDiffInDays:function(i,h){var f=h.getTime();var g=i.getTime();return parseInt((f-g)/(24*3600*1000));},dateDiffInWeeks:function(i,h){var f=h.getTime();var g=i.getTime();return parseInt((f-g)/(24*3600*1000*7));},dateDiffInMonths:function(l,i){var f=l.getFullYear();var h=i.getFullYear();var g=l.getMonth();var j=i.getMonth();return(j+12*h)-(g+12*f);},dateDiffInYears:function(g,f){return f.getFullYear()-g.getFullYear();},resetDialogSize:function(j){var g,o,h=e.one("body"),l,p,n,m,i=0,f,q;if(!(o=e.one(j))){Config.consoleLogger&&Config.consoleLogger("Not resizing the dialog... returning the function!");return;}g=o.ancestor("div.yui3-widget");if(!g){return;}l=h.get("winHeight");p=o.get("clientHeight");if(j==="#modal-viewinvite"){i=210;}else{if((j==="#modal-addcal")||(j==="#modal-editcal")){i=140;}}if(p>l||(o.getXY()[1]<0)){n=o.one("div.modal-bd-shell");g.setStyle("top","0px");g.setY(10);m=p-l;q=l-i;n.setStyle("max-height",q+"px");n.setStyle("maxHeight",q+"px");Config.consoleLogger&&Config.consoleLogger("Resizing the dialog...");}}});},"1.0.0",{requires:["querystring-parse-simple","lib-net","common-ui-dialog-helper","_shared_module_offscreen_bin_modal_btn_ok","_shared_module_offscreen_bin_modal"]});YUI.add("calendar-model-folder",function(b){var a=function(c){var e=this,d={color:{value:"",setter:function(f){if(f=="defaultColor"||f.indexOf("#")!=-1){return"blue";}return f;},getter:function(f){if(f==""){return"blue";}return f;}},folderCheck:{value:true,setter:function(f){if(typeof f=="string"){if(f.toLowerCase()=="false"){return false;}return true;}return f;}},isActive:{setter:function(f){if(typeof f=="string"){if(f.toLowerCase()=="false"){e.set("folderCheck",false);return;}e.set("folderCheck",true);}if(f){e.set("folderCheck",f);}}},icsToken:{value:null},id:{value:0,validator:function(f){return f>=0;}},isReadOnly:{value:false,getter:function(f){if(f||e.get("url")){return true;}else{if(Config.view&&Config.view=="rsvp"){return false;}else{if(!Config.cfg.rw){return true;}else{return false;}}}},setter:function(f){if(typeof f=="string"){if(f.toLowerCase()=="false"){return false;}return true;}return f;}},owner:{value:null},isEntity:{getter:function(f){if(f||(e.get("owner")&&e.get("owner").substring(0,2)=="@@")){return true;}return false;}},isGroupsFolder:{getter:function(){if(e.get("owner")&&(e.get("owner").search("@@group")==0)){return true;}return false;}},isSportsFolder:{getter:function(){if(e.get("owner")&&(e.get("owner").search("@@discovery")==0)){return true;}return false;}},isRemote:{value:false},name:{value:"",setter:function(f){return f.replace("&#39;","'");}},remoteId:{value:""},type:{value:"EVENT"},url:{value:null},webToken:{value:null},grants:{value:null},autoRefreshEnabled:{value:false},reminderSettings:{value:null,setter:function(f){if(f&&f.sendIM){f.sendMessenger=true;}return f;}},isRemShareAllowed:{value:true},ETag:{value:null}};b.augment(e,b.Attribute);e.addAttrs(d,c||{});};b.extend(a,b.calendar.model.Component,{getFolderType:function(){var d=this,c=new RegExp(Config.holidayAccount);if(d.get("url")){return"OTHER";}else{if(d.get("isRemote")&&(d.get("owner").match(c))){return"HOLIDAY";}else{if(d.get("isRemote")){if(d.get("isEntity")&&d.get("isGroupsFolder")){return"GROUPS";}else{if(d.get("isEntity")&&d.get("isSportsFolder")){return"SPORTS";}else{return"FRIENDS";}}}else{return"OWN";}}}}});b.namespace("calendar.model");b.calendar.model.Folder=a;},"1.0.0",{requires:["attribute-base","event-base"]});YUI.add("calendar-model-event",function(d){var b=d.lib.Utils,c={invite:1,anniversary:1,bills:1,birthday:1,date:1,doctor:1,flag:1,fun:1,green:1,pet:1,phone:1,red:1,school:1,vacation:1,work:1,"ss-bkb":1,"ss-ih":1,"ss-bb":1,"ss-fb":1,"ss-s":1,yellow:1};var a=function(e){var g=this,f={allDay:{value:false,setter:function(h){if(typeof h==="string"){if(h.toLowerCase()==="false"){return false;}return true;}return h;}},categories:{value:[],setter:function(j){var h="";if(d.Lang.isArray(j)&&j.length){h=j[0].toLowerCase();}if(h in c){return[h];}else{return[];}}},startTime:{value:""},endTime:{value:"",validator:function(h){return h>g.get("startTime");}},startTimeTZID:{value:""},endTimeTZID:{value:""},hasReminder:{value:false,getter:function(){var h=g.get("reminders");if(h&&h.count){return true;}return false;}},isRecurring:{value:false},isSpanner:{value:false},location:{value:""},url:{value:""},isOpaque:{value:false},recurrence:{value:{frequency:"",byDay:[],interval:"",until:"",count:""}},isException:{value:false},recurId:{value:null,setter:function(h){if(Config.cfg.isCorp){if(h==null){return g.get("startTime").toString("yyyyMMddTHHmmss");}else{if(h.match(/^1970(.)*/)){g.set("isRecurring",true);return g.get("startTime").toString("yyyyMMddTHHmmss");}else{if(h){g.set("isRecurring",true);g.set("isException",true);return h;}}}}else{if(h===null){return g.get("startTime").toString("yyyyMMddTHHmmss");}else{g.set("isException",true);return h;}}}},reminders:{value:{reminder:[]}},attendees:{value:{attendee:[]}},organiser:{value:null},organiserCn:{value:null},ICalExchangeId:{value:null},referredUid:{value:null},referredOwnerId:{value:null}};g.idxDate=null;g.idxUID=null;d.augment(g,d.Attribute);a.superclass.constructor.call(g,e);g.addAttrs(f,e||{});g.on("summaryChange",function(h){if(!d.Lang.trim(h.newVal)||h.newVal.length>1023){h.preventDefault();throw new Error({code:"validationFailure",attr:"summary"});}});g.on("recurrenceChange",function(l){var m=this,k,h,j;j=m.get("startTime");h=1000*60*60*24;k=(m.get("endTime").getTime()-m.get("startTime").getTime())/h;switch(l.newVal.frequency){case"DAILY":if(k>1){throw new Error({code:"validationFailure",attr:"recurrence"});}break;case"WEEKLY":if(k>7){throw new Error({code:"validationFailure",attr:"recurrence"});}break;case"MONTHLY":monthly=j.getMonth();year=j.getFullYear();if(k>Date.getDaysInMonth(year,monthly)){throw new Error({code:"validationFailure",attr:"recurrence"});}break;case"YEARLY":year=j.getFullYear();days_in_year=Date.isLeapYear(year)?366:365;if(k>days_in_year){throw new Error({code:"validationFailure",attr:"recurrence"});}break;}});};d.extend(a,d.calendar.model.Component,{getRecurrenceSummary:function(){var w=this,l=w.get("recurrence"),m="",h=[],A,C={},z=[],g,p=false,x=d.lib.Utils,e,s,o={},f="",k,B={},j=false,q,u;var y={MO:strings.str_cal_summary_mondays,TU:strings.str_cal_summary_tuesdays,WE:strings.str_cal_summary_wednesdays,TH:strings.str_cal_summary_thursdays,FR:strings.str_cal_summary_fridays,SA:strings.str_cal_summary_saturdays,SU:strings.str_cal_summary_sundays};var r={MO:strings.str_mail_weekday_monday,TU:strings.str_mail_weekday_tuesday,WE:strings.str_mail_weekday_wednesday,TH:strings.str_mail_weekday_thursday,FR:strings.str_mail_weekday_friday,SA:strings.str_mail_weekday_saturday,SU:strings.str_mail_weekday_sunday};var n=[strings.str_cal_summary_last,strings.str_cal_summary_first,strings.str_cal_summary_second,strings.str_cal_summary_third,strings.str_cal_summary_fourth];var v=function(){var J,K=[],I,H,G=[],E={},F="",D;if(l===null){return;}if(l.frequency==="WEEKLY"){J=l.byDay;for(I in J){K.push(J[I]);}g=K.length-1;if(K[0]==="MO"&&K[4]==="FR"){p=true;}z=K;}if(l.until){J=l.until;f=new Date(J.substring(4,6)+"/"+J.substring(6,8)+"/"+J.substring(0,4)).toString(strings.str_cal_fmt_addEvent_date);}if(l.frequency==="MONTHLY"){if(l.byDay){J=l.byDay;I=2;D=0;if(J[0].length===4){B.number=n[0];F=J[0][2]+J[0][3];j=true;}else{B.number=n[J[0][0]];F=J[0][1]+J[0][2];if(J[0][0]===1){j=true;}}B.day=r[F];}else{J=w.get("startTime");F=J.toString("dd");B.day=t[F*1];}}};var t=["NO DAY",strings.str_cal_summary_1st,strings.str_cal_summary_2nd,strings.str_cal_summary_3rd,strings.str_cal_summary_4th,strings.str_cal_summary_5th,strings.str_cal_summary_6th,strings.str_cal_summary_7th,strings.str_cal_summary_8th,strings.str_cal_summary_9th,strings.str_cal_summary_10th,strings.str_cal_summary_11th,strings.str_cal_summary_12th,strings.str_cal_summary_13th,strings.str_cal_summary_14th,strings.str_cal_summary_15th,strings.str_cal_summary_16th,strings.str_cal_summary_17th,strings.str_cal_summary_18th,strings.str_cal_summary_19th,strings.str_cal_summary_20th,strings.str_cal_summary_21st,strings.str_cal_summary_22nd,strings.str_cal_summary_23rd,strings.str_cal_summary_24th,strings.str_cal_summary_25th,strings.str_cal_summary_26th,strings.str_cal_summary_27th,strings.str_cal_summary_28th,strings.str_cal_summary_29th,strings.str_cal_summary_30th,strings.str_cal_summary_31st];v();if(w.get("isRecurring")){if(l.frequency==="DAILY"){if(!(l.until)&&!(l.count)){if(l.interval==="1"){m=strings.str_cal_summary_recurr_day_one;}else{if(l.interval==="2"){m=strings.str_cal_summary_recurr_day_two;}else{m=x.substitute(strings.str_cal_summary_recurr_day_more,{x:l.interval});}}}else{if(l.until){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_day_one_until,{date:f});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_day_two_until,{date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_day_more_until,{x:l.interval,date:f});}}}else{if(l.count){k=l.count;if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_day_one_endsAfter,{n:k});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_day_two_endsAfter,{n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_day_more_endsAfter,{x:l.interval,n:k});}}}}}}else{if(l.frequency==="YEARLY"){if(!(l.until)&&!(l.count)){if(l.interval==="1"){m=strings.str_cal_summary_recurr_year_one;}else{if(l.interval==="2"){m=strings.str_cal_summary_recurr_year_two;}else{m=x.substitute(strings.str_cal_summary_recurr_year_more,{x:l.interval});}}}else{if(l.until){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_year_one_until,{date:f});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_year_two_until,{date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_year_more_until,{x:l.interval,date:f});}}}else{if(l.count){k=l.count;if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_year_one_endsAfter,{n:k});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_year_two_endsAfter,{n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_year_more_endsAfter,{x:l.interval,n:k});}}}}}}else{if(l.frequency==="WEEKLY"){h=[];if(p){e=strings.str_cal_summary_allWeekdays;s=true;}for(A=0;(A<g)&&(p===false);A++){h.push(y[z[A]]);}if(!p){e=y[z[A]];if(A>0){s=false;}else{if(A===0){s=true;}}if(h.length>1){h=h.join(", ");}}if(!(l.until)&&!(l.count)){if(l.interval==="1"){if(s){if(p){u=strings.str_cal_summary_recurr_week_one_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_one;}m=x.substitute(u,{days:e});}else{m=x.substitute(strings.str_cal_summary_recurr_week_one_manyDays,{daysFrom:h,daysTo:e});}}else{if(l.interval==="2"){if(s){if(p){u=strings.str_cal_summary_recurr_week_two_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_two;}m=x.substitute(u,{days:e});}else{m=x.substitute(strings.str_cal_summary_recurr_week_two_manyDays,{daysFrom:h,daysTo:e});}}else{if(s){if(p){u=strings.str_cal_summary_recurr_week_more_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_more;}m=x.substitute(u,{x:l.interval,days:e});}else{m=x.substitute(strings.str_cal_summary_recurr_week_more_manyDays,{x:l.interval,daysFrom:h,daysTo:e});}}}}else{if(l.until){if(l.interval==="1"){if(s){if(p){u=strings.str_cal_summary_recurr_week_one_until_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_one_until;}m=x.substitute(u,{days:e,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_week_one_until_manyDays,{daysFrom:h,daysTo:e,date:f});}}else{if(l.interval==="2"){if(s){if(p){u=strings.str_cal_summary_recurr_week_two_until_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_two_until;}m=x.substitute(u,{days:e,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_week_two_until_manyDays,{daysFrom:h,daysTo:e,date:f});}}else{if(s){if(p){u=strings.str_cal_summary_recurr_week_more_until_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_more_until;}m=x.substitute(u,{x:l.interval,days:e,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_week_more_until_manyDays,{x:l.interval,daysFrom:h,daysTo:e,date:f});}}}}else{if(l.count){k=l.count;if(l.interval==="1"){if(s){if(p){u=strings.str_cal_summary_recurr_week_one_endsAfter_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_one_endsAfter;}m=x.substitute(u,{days:e,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_week_one_endsAfter_manyDays,{daysFrom:h,daysTo:e,n:k});}}else{if(l.interval==="2"){if(s){if(p){u=strings.str_cal_summary_recurr_week_two_endsAfter_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_two_endsAfter;}m=x.substitute(u,{days:e,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_week_two_endsAfter_manyDays,{daysFrom:h,daysTo:e,n:k});}}else{if(s){if(p){u=strings.str_cal_summary_recurr_week_more_endsAfter_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_more_endsAfter;}m=x.substitute(u,{x:l.interval,days:e,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_week_more_endsAfter_manyDays,{x:l.interval,daysFrom:h,daysTo:e,n:k});}}}}}}}else{if(l.frequency==="MONTHLY"){if(l.byDay){if(!(l.until)&&!(l.count)){if(l.interval==="1"){if(j){m=x.substitute(strings.str_cal_summary_recurr_month_one_firstLast_onWeek,{number:B.number,day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_one_secondThirdFourth_onWeek,{number:B.number,day:B.day});}}else{if(l.interval==="2"){if(j){m=x.substitute(strings.str_cal_summary_recurr_month_two_firstLast_onWeek,{number:B.number,day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_two_secondThirdFourth_onWeek,{number:B.number,day:B.day});}}else{if(j){m=x.substitute(strings.str_cal_summary_recurr_month_more_firstLast_onWeek,{x:l.interval,number:B.number,day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_secondThirdFourth_onWeek,{x:l.interval,number:B.number,day:B.day});}}}}else{if(l.until){if(l.interval==="1"){if(j){m=x.substitute(strings.str_cal_summary_recurr_month_one_firstLast_onWeek_until,{number:B.number,day:B.day,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_month_one_secondThirdFourth_onWeek_until,{number:B.number,day:B.day,date:f});}}else{if(l.interval==="2"){if(j){m=x.substitute(strings.str_cal_summary_recurr_month_two_firstLast_onWeek_until,{number:B.number,day:B.day,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_month_two_secondThirdFourth_onWeek_until,{number:B.number,day:B.day,date:f});}}else{if(j){m=x.substitute(strings.str_cal_summary_recurr_month_more_firstLast_onWeek_until,{x:l.interval,number:B.number,day:B.day,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_secondThirdFourth_onWeek_until,{x:l.interval,number:B.number,day:B.day,date:f});}}}}else{if(l.count){k=l.count;if(l.interval==="1"){if(j){m=x.substitute(strings.str_cal_summary_recurr_month_one_firstLast_onWeek_endsAfter,{number:B.number,day:B.day,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_month_one_secondThirdFourth_onWeek_endsAfter,{number:B.number,day:B.day,n:k});}}else{if(l.interval==="2"){if(j){m=x.substitute(strings.str_cal_summary_recurr_month_two_firstLast_onWeek_endsAfter,{number:B.number,day:B.day,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_month_two_secondThirdFourth_onWeek_endsAfter,{number:B.number,day:B.day,n:k});}}else{if(j){m=x.substitute(strings.str_cal_summary_recurr_month_more_firstLast_onWeek_endsAfter,{x:l.interval,number:B.number,day:B.day,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_secondThirdFourth_onWeek_endsAfter,{x:l.interval,number:B.number,day:B.day,n:k});}}}}}}}else{if(!(l.until)&&!(l.count)){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_month_one_onDay,{day:B.day});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_month_two_onDay,{day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_onDay,{x:l.interval,day:B.day});}}}else{if(l.until){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_month_one_onDay_until,{day:B.day,date:f});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_month_two_onDay_until,{day:B.day,date:f});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_onDay_until,{x:l.interval,day:B.day,date:f});}}}else{if(l.count){k=l.count;if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_month_one_onDay_endsAfter,{day:B.day,n:k});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_month_two_onDay_endsAfter,{day:B.day,n:k});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_onDay_endsAfter,{x:l.interval,day:B.day,n:k});}}}}}}}}}}}return m;},getReminderSummary:function(){var m=this,l="",h=d.lib.Utils,k,j,g,f=m.get("reminders"),e=f.reminder;if(m.get("hasReminder")){if(f.count===1){j="1";}else{if(f.count===2){j="2";}}g=strings.str_cal_summary_reminder;if(e[0].email&&e[0].messenger){k=strings.str_cal_summary_emailAndMessenger;g=strings.str_cal_summary_reminders;}else{if(e[0].email){k=strings.str_cal_summary_email;}else{if(e[0].messenger){k=strings.str_cal_summary_messenger;}}}l=h.substitute(strings.str_cal_summary_reminderText,{x:j,reminder:g,mode:k});}return l;},clone:function(){var f=this,e=new d.calendar.model.Event();if(f.get("allDay")){e.set("allDay",f.get("allDay"));}if(f.get("endTime")){e.set("endTime",f.get("endTime"));}if(f.get("startTime")){e.set("startTime",f.get("startTime"));}if(f.get("folder")){e.set("folder",f.get("folder"));}if(f.get("summary")){e.set("summary",f.get("summary"));}if(f.get("location")){e.set("location",f.get("location"));}if(f.get("uid")){e.set("uid",f.get("uid"));}if(f.get("categories").length!==0){e.set("categories",f.get("categories"));}if(f.get("attendees").attendee.length!==0){e.set("attendees",f.get("attendees"));}if(f.get("hasReminder")){e.set("hasReminder",f.get("hasReminder"));}if(!b.isEmpty(f.get("reminders"))||!(f.get("reminders").reminder.length===0)){e.set("reminders",f.get("reminders"));}if(f.get("isRecurring")!==undefined){e.set("isRecurring",f.get("isRecurring"));if(f.get("isRecurring")){e.set("recurrence",f.get("recurrence"));}}if(f.get("category")){e.set("category",f.get("category"));}if(f.get("isSpanner")){e.set("isSpanner",f.get("isSpanner"));}if(f.get("url")){e.set("url",f.get("url"));}if(f.get("description")){e.set("description",f.get("description"));}if(f.get("isOpaque")){e.set("isOpaque",f.get("isOpaque"));}if(f.get("isException")){e.set("isException",f.get("isException"));}if(f.get("isException")){e.set("recurId",f.get("recurId"));}else{e.set("recurId",null);}if(f.get("duration")){e.set("duration",f.get("duration"));}if(f.get("status")){e.set("status",f.get("status"));}if(f.get("vClass")){e.set("vClass",f.get("vClass"));}return e;},simplify:function(){var f=this,e={event:{}};if(f.get("uid")){e.event.uid=f.get("uid");}if(f.get("summary")){e.event.summary=f.get("summary");}if(f.get("location")){e.event.location=f.get("location");}if(f.get("url")){e.event.url=f.get("url");}e.event.allDay=f.get("allDay").toString();if(f.get("duration")){e.event.duration=f.get("durattion");}if(f.get("endTime")){if(f.get("allDay")){e.event.endTime=f.get("endTime").toString("yyyyMMdd");}else{e.event.endTime=f.get("endTime").toString("yyyyMMddTHHmmss");}}if(f.get("startTime")){if(f.get("allDay")){e.event.startTime=f.get("startTime").toString("yyyyMMdd");}else{e.event.startTime=f.get("startTime").toString("yyyyMMddTHHmmss");}}if(f.get("startTimeTZID")){if(!f.get("allDay")){e.event.startTimeTZID=f.get("startTimeTZID");}}if(f.get("endTimeTZID")){if(!f.get("allDay")){e.event.endTimeTZID=f.get("endTimeTZID");}}if(f.get("folder")&&f.get("folder") instanceof d.calendar.model.Folder){e.event.folderId=f.get("folder").get("id");}if(f.get("description")){e.event.description=f.get("description");}if(f.get("categories").length!==0){e.event.categories=this.get("categories");}if(!b.isEmpty(f.get("reminders"))&&f.get("reminders").reminder.length!==0){e.event.reminders={};e.event.reminders=f.get("reminders");}if(f.get("isRecurring")!==undefined){e.event.isRecurring=f.get("isRecurring");if(f.get("isRecurring")){e.event.recurrence={};if(f.get("recurrence").frequency!==""){e.event.recurrence.frequency=f.get("recurrence").frequency;}if(f.get("recurrence").interval!==""){e.event.recurrence.interval=f.get("recurrence").interval;}if(f.get("recurrence").until&&f.get("recurrence").until!==""){e.event.recurrence.until=f.get("recurrence").until.toString("yyyyMMddTHHmmss");}if(f.get("recurrence").count!==""){e.event.recurrence.count=f.get("recurrence").count;}if(f.get("recurrence").numInstances!==""){e.event.recurrence.count=f.get("recurrence").numInstances;}if(f.get("recurrence").byDay&&f.get("recurrence").byDay.length!==0){e.event.recurrence.byDay=f.get("recurrence").byDay;}}}if(f.get("isSpanner")){e.event.isSpanner=f.get("isSpanner");}if(f.get("isOpaque")){e.event.isOpaque=f.get("isOpaque");}if(f.get("isException")){e.event.isException=f.get("isException");}if(f.get("isException")){e.event.recurId=f.get("recurId");}if(f.get("duration")){e.event.duration=f.get("duration");}if(f.get("status")){e.event.status=f.get("status");}if(f.get("uri")){e.event.uri={};e.event.uri=f.get("uri");}if(f.get("attendees").attendee.length!==0){e.event.attendees={};e.event.attendees=f.get("attendees");}if(f.get("vClass")){e.event.vClass=f.get("vClass");}return e;},isInvite:function(j,g){var l=this,m=l.get("organiser"),e=l.get("attendees"),f=l.get("folder").get("owner"),k={},h,n;if(Config.cfg.isCorp&&(l.get("description")==="--UNFETCHED--DATA--")){if(l.get("organiser")&&(l.get("organiser")!="")&&(l.get("organiser")!==Prefs.yemail)){if(!j){return true;}else{for(h=0;h<e.count;h++){if(Prefs.yemail==e.attendee[h].email){return e.attendee[h].partStat;}}return(j)?"NEEDS_ACTION":true;}}else{for(h=0;h<e.count;h++){if(Prefs.yemail==e.attendee[h].email){return(j)?e.attendee[h].partStat:true;}}return false;}}if(!m||d.Lang.trim(m)==""){return false;}if(!e||!e.count){return false;}if(Prefs.commChannels&&Prefs.commChannels.emails&&Prefs.commChannels.emails.primary){k=[Prefs.commChannels.emails.primary];if(Prefs.yemail!=Prefs.commChannels.emails.primary){k.push(Prefs.yemail);}}for(h in k){if((m===k[h])&&!g){return false;}}if(f){m=b.getYIDFromEmailAddress(m);if((f==m)&!g){return false;}}if(j){for(h=0;h<e.count;h++){for(n in k){if(k[n]==e.attendee[h].email){return e.attendee[h].partStat;}}}return"NEEDS_ACTION";}return true;},generateShortRecurrenceSummary:function(f){var j=this,e=j.get("isRecurring")?(j.get("recurrence").frequency.toLowerCase()):null,n=j.get("recurrence"),g={MO:strings.str_cal_abbr_mon,TU:strings.str_cal_abbr_tue,WE:strings.str_cal_abbr_wed,TH:strings.str_cal_abbr_thu,FR:strings.str_cal_abbr_fri,SA:strings.str_cal_abbr_sat,SU:strings.str_cal_abbr_sun},m,k=[],l=[],h="";if(!e){return null;}switch(e){case"never":m=strings.str_cal_repeat;break;case"daily":day=n.interval;if(day==="1"){m=(!f)?strings.str_cal_ae_daily_repeats:strings.str_cal_ae_daily;}else{if(day==="2"){m=(!f)?strings.str_cal_summary_every_other_day_repeats:strings.str_cal_summary_every_other_day;}else{interval=day;m=b.substitute((!f)?strings.str_cal_summary_every_x_days_repeats:strings.str_cal_summary_every_x_days,{x:interval});}}break;case"weekly":week=n.interval;k=n.byDay;for(i=0;i<k.length;i++){currentDay=g[k[i]];l.push(currentDay);}h=l.join(", ");if(week==="1"){m=b.substitute((!f)?strings.str_cal_summary_every_days_repeats:strings.str_cal_summary_every_days,{dayname:h});}else{if(week==="2"){m=b.substitute((!f)?strings.str_cal_summary_every_other_dayname_repeats:strings.str_cal_summary_every_other_dayname,{dayname:h});}else{interval=week;m=b.substitute((!f)?strings.str_cal_summary_every_week_on_repeats:strings.str_cal_summary_every_week_on,{x:interval,dayname:h});}}break;case"monthly":month=n.interval;if(month==="1"){m=(!f)?strings.str_cal_ae_monthly_repeats:strings.str_cal_ae_monthly;}else{if(month==="2"){m=(!f)?strings.str_cal_summary_every_other_month_repeats:strings.str_cal_summary_every_other_month;}else{if(month!=="month_custom"){interval=month.substring(0,1);m=b.substitute((!f)?strings.str_cal_summary_every_x_months_repeats:strings.str_cal_summary_every_x_months,{x:interval});}}}break;case"yearly":year=n.interval;if(year==="1"){m=(!f)?strings.str_cal_ae_yearly_repeats:strings.str_cal_ae_yearly;}else{if(year==="2"){m=(!f)?strings.str_cal_summary_every_other_year_repeats:strings.str_cal_summary_every_other_year;}else{interval=year.substring(0,1);m=b.substitute((!f)?strings.str_cal_summary_every_x_years_repeats:strings.str_cal_summary_every_x_years,{x:interval});}}break;}return m;}});d.namespace("calendar.model");d.calendar.model.Event=a;},"1.0.0",{requires:["attribute-base","event-base","calendar-model-component","lib-utils","calendar-model-folder"]});YUI.add("calendar-model-event-tardis",function(d){var a=d.lib.Utils,b={invite:1,anniversary:1,bills:1,birthday:1,date:1,doctor:1,flag:1,fun:1,green:1,pet:1,phone:1,red:1,school:1,"ss-bkb":1,"ss-ih":1,"ss-bb":1,"ss-fb":1,"ss-s":1,vacation:1,work:1,yellow:1};var c=function(e){var g=this,f={allDay:{value:false,setter:function(h){if(typeof h==="string"){if(h.toLowerCase()==="false"){return false;}return true;}return h;}},richContent:{value:null,setter:function(h){return d.JSON.parse(h);}},categories:{value:[],setter:function(j){var h="";if(d.Lang.isArray(j)&&j.length){h=j[0].toLowerCase();}if(h in b){return[h];}else{return[];}}},startTime:{value:""},endTime:{value:"",validator:function(h){return h>g.get("startTime");}},startTimeTZID:{value:""},endTimeTZID:{value:""},tzId:{value:null,setter:function(h){if(h){g.set("startTimeTZID",h);g.set("endTimeTZID",h);}return h;}},hasReminder:{value:false,getter:function(){var h=g.get("reminders");if(h&&h.count){return true;}return false;}},isRecurring:{value:false},isSpanner:{value:false},location:{value:""},url:{value:""},isOpaque:{value:false},status:{value:""},eventStatus:{value:"BUSY"},recurrence:{value:{frequency:"",byDay:[],interval:"",until:"",numInstances:""},setter:function(h){if(h&&h.frequency&&(h.frequency!=="")){g.set("isRecurring",true);}return h;}},isException:{value:false},recurId:{value:null,setter:function(h){if(Config.cfg.isCorp){if(h==null){return g.get("startTime").toString("yyyyMMddTHHmmss");}else{if(h.match(/^1970(.)*/)){g.set("isRecurring",true);return g.get("startTime").toString("yyyyMMddTHHmmss");}else{if(h){g.set("isRecurring",true);g.set("isException",true);return h;}}}}else{if(h===null){return g.get("startTime").toString("yyyyMMddTHHmmss");}else{g.set("isException",true);return h;}}}},reminders:{value:{reminder:[]}},attendees:{value:{attendee:[]}},organiser:{value:null},organiserCn:{value:null},organizer:{value:null,setter:function(h){if(h&&h.email){g.set("organiser",h.email);}if(h&&h.name){g.set("organiserCn",h.name);}return h;}},ICalExchangeId:{value:null},referredUid:{value:null},referredOwnerId:{value:null}};g.idxDate=null;g.idxUID=null;d.augment(g,d.Attribute);c.superclass.constructor.call(g,e);g.addAttrs(f,e||{});g.on("summaryChange",function(h){if(!d.Lang.trim(h.newVal)||h.newVal.length>1023){h.preventDefault();throw new Error({code:"validationFailure",attr:"summary"});}});g.on("recurrenceChange",function(l){var m=this,k,h,j;j=m.get("startTime");h=1000*60*60*24;if(j===""){return;}else{k=(m.get("endTime").getTime()-m.get("startTime").getTime())/h;}if(l.newVal.frequency!==""){switch(l.newVal.frequency){case"DAILY":if(k>1){throw new Error({code:"validationFailure",attr:"recurrence"});}break;case"WEEKLY":if(k>7){throw new Error({code:"validationFailure",attr:"recurrence"});}break;case"MONTHLY":monthly=j.getMonth();year=j.getFullYear();if(k>Date.getDaysInMonth(year,monthly)){throw new Error({code:"validationFailure",attr:"recurrence"});}break;case"YEARLY":year=j.getFullYear();days_in_year=Date.isLeapYear(year)?366:365;if(k>days_in_year){throw new Error({code:"validationFailure",attr:"recurrence"});}break;}}});};d.extend(c,d.calendar.model.Component,{getRecurrenceSummary:function(){var w=this,l=w.get("recurrence"),m="",j=[],A,C={},z=[],h,p=false,x=d.lib.Utils,f,s,o={},g="",e,B={},k=false,q,u;var y={MO:strings.str_cal_summary_mondays,TU:strings.str_cal_summary_tuesdays,WE:strings.str_cal_summary_wednesdays,TH:strings.str_cal_summary_thursdays,FR:strings.str_cal_summary_fridays,SA:strings.str_cal_summary_saturdays,SU:strings.str_cal_summary_sundays};var r={MO:strings.str_mail_weekday_monday,TU:strings.str_mail_weekday_tuesday,WE:strings.str_mail_weekday_wednesday,TH:strings.str_mail_weekday_thursday,FR:strings.str_mail_weekday_friday,SA:strings.str_mail_weekday_saturday,SU:strings.str_mail_weekday_sunday};var n=[strings.str_cal_summary_last,strings.str_cal_summary_first,strings.str_cal_summary_second,strings.str_cal_summary_third,strings.str_cal_summary_fourth];var v=function(){var J,K=[],I,H,G=[],E={},F="",D;if(l===null){return;}if(l.frequency==="WEEKLY"){J=l.byDay;for(I in J){K.push(J[I]);}h=K.length-1;if(K[0]==="MO"&&K[4]==="FR"){p=true;}z=K;}if(l.until){J=l.until;g=new Date(J.substring(4,6)+"/"+J.substring(6,8)+"/"+J.substring(0,4)).toString(strings.str_cal_fmt_addEvent_date);}if(l.frequency==="MONTHLY"){if(l.byDay){J=l.byDay;I=2;D=0;if(J[0].length===4){B.number=n[0];F=J[0][2]+J[0][3];k=true;}else{B.number=n[J[0][0]];F=J[0][1]+J[0][2];if(J[0][0]===1){k=true;}}B.day=r[F];}else{J=w.get("startTime");F=J.toString("dd");B.day=t[F*1];}}};var t=["NO DAY",strings.str_cal_summary_1st,strings.str_cal_summary_2nd,strings.str_cal_summary_3rd,strings.str_cal_summary_4th,strings.str_cal_summary_5th,strings.str_cal_summary_6th,strings.str_cal_summary_7th,strings.str_cal_summary_8th,strings.str_cal_summary_9th,strings.str_cal_summary_10th,strings.str_cal_summary_11th,strings.str_cal_summary_12th,strings.str_cal_summary_13th,strings.str_cal_summary_14th,strings.str_cal_summary_15th,strings.str_cal_summary_16th,strings.str_cal_summary_17th,strings.str_cal_summary_18th,strings.str_cal_summary_19th,strings.str_cal_summary_20th,strings.str_cal_summary_21st,strings.str_cal_summary_22nd,strings.str_cal_summary_23rd,strings.str_cal_summary_24th,strings.str_cal_summary_25th,strings.str_cal_summary_26th,strings.str_cal_summary_27th,strings.str_cal_summary_28th,strings.str_cal_summary_29th,strings.str_cal_summary_30th,strings.str_cal_summary_31st];v();if(w.get("isRecurring")){if(l.frequency==="DAILY"){if(!(l.until)&&!(l.numInstances)){if(l.interval==="1"){m=strings.str_cal_summary_recurr_day_one;}else{if(l.interval==="2"){m=strings.str_cal_summary_recurr_day_two;}else{m=x.substitute(strings.str_cal_summary_recurr_day_more,{x:l.interval});}}}else{if(l.until){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_day_one_until,{date:g});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_day_two_until,{date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_day_more_until,{x:l.interval,date:g});}}}else{if(l.numInstances){e=l.numInstances;if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_day_one_endsAfter,{n:e});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_day_two_endsAfter,{n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_day_more_endsAfter,{x:l.interval,n:e});}}}}}}else{if(l.frequency==="YEARLY"){if(!(l.until)&&!(l.numInstances)){if(l.interval==="1"){m=strings.str_cal_summary_recurr_year_one;}else{if(l.interval==="2"){m=strings.str_cal_summary_recurr_year_two;}else{m=x.substitute(strings.str_cal_summary_recurr_year_more,{x:l.interval});}}}else{if(l.until){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_year_one_until,{date:g});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_year_two_until,{date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_year_more_until,{x:l.interval,date:g});}}}else{if(l.numInstances){e=l.numInstances;if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_year_one_endsAfter,{n:e});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_year_two_endsAfter,{n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_year_more_endsAfter,{x:l.interval,n:e});}}}}}}else{if(l.frequency==="WEEKLY"){j=[];if(p){f=strings.str_cal_summary_allWeekdays;s=true;}for(A=0;(A<h)&&(p===false);A++){j.push(y[z[A]]);}if(!p){f=y[z[A]];if(A>0){s=false;}else{if(A===0){s=true;}}if(j.length>1){j=j.join(", ");}}if(!(l.until)&&!(l.numInstances)){if(l.interval==="1"){if(s){if(p){u=strings.str_cal_summary_recurr_week_one_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_one;}m=x.substitute(u,{days:f});}else{m=x.substitute(strings.str_cal_summary_recurr_week_one_manyDays,{daysFrom:j,daysTo:f});}}else{if(l.interval==="2"){if(s){if(p){u=strings.str_cal_summary_recurr_week_two_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_two;}m=x.substitute(u,{days:f});}else{m=x.substitute(strings.str_cal_summary_recurr_week_two_manyDays,{daysFrom:j,daysTo:f});}}else{if(s){if(p){u=strings.str_cal_summary_recurr_week_more_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_more;}m=x.substitute(u,{x:l.interval,days:f});}else{m=x.substitute(strings.str_cal_summary_recurr_week_more_manyDays,{x:l.interval,daysFrom:j,daysTo:f});}}}}else{if(l.until){if(l.interval==="1"){if(s){if(p){u=strings.str_cal_summary_recurr_week_one_until_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_one_until;}m=x.substitute(u,{days:f,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_week_one_until_manyDays,{daysFrom:j,daysTo:f,date:g});}}else{if(l.interval==="2"){if(s){if(p){u=strings.str_cal_summary_recurr_week_two_until_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_two_until;}m=x.substitute(u,{days:f,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_week_two_until_manyDays,{daysFrom:j,daysTo:f,date:g});}}else{if(s){if(p){u=strings.str_cal_summary_recurr_week_more_until_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_more_until;}m=x.substitute(u,{x:l.interval,days:f,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_week_more_until_manyDays,{x:l.interval,daysFrom:j,daysTo:f,date:g});}}}}else{if(l.numInstances){e=l.numInstances;if(l.interval==="1"){if(s){if(p){u=strings.str_cal_summary_recurr_week_one_endsAfter_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_one_endsAfter;}m=x.substitute(u,{days:f,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_week_one_endsAfter_manyDays,{daysFrom:j,daysTo:f,n:e});}}else{if(l.interval==="2"){if(s){if(p){u=strings.str_cal_summary_recurr_week_two_endsAfter_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_two_endsAfter;}m=x.substitute(u,{days:f,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_week_two_endsAfter_manyDays,{daysFrom:j,daysTo:f,n:e});}}else{if(s){if(p){u=strings.str_cal_summary_recurr_week_more_endsAfter_forAllWeekDays;}else{u=strings.str_cal_summary_recurr_week_more_endsAfter;}m=x.substitute(u,{x:l.interval,days:f,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_week_more_endsAfter_manyDays,{x:l.interval,daysFrom:j,daysTo:f,n:e});}}}}}}}else{if(l.frequency==="MONTHLY"){if(l.byDay){if(!(l.until)&&!(l.numInstances)){if(l.interval==="1"){if(k){m=x.substitute(strings.str_cal_summary_recurr_month_one_firstLast_onWeek,{number:B.number,day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_one_secondThirdFourth_onWeek,{number:B.number,day:B.day});}}else{if(l.interval==="2"){if(k){m=x.substitute(strings.str_cal_summary_recurr_month_two_firstLast_onWeek,{number:B.number,day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_two_secondThirdFourth_onWeek,{number:B.number,day:B.day});}}else{if(k){m=x.substitute(strings.str_cal_summary_recurr_month_more_firstLast_onWeek,{x:l.interval,number:B.number,day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_secondThirdFourth_onWeek,{x:l.interval,number:B.number,day:B.day});}}}}else{if(l.until){if(l.interval==="1"){if(k){m=x.substitute(strings.str_cal_summary_recurr_month_one_firstLast_onWeek_until,{number:B.number,day:B.day,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_month_one_secondThirdFourth_onWeek_until,{number:B.number,day:B.day,date:g});}}else{if(l.interval==="2"){if(k){m=x.substitute(strings.str_cal_summary_recurr_month_two_firstLast_onWeek_until,{number:B.number,day:B.day,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_month_two_secondThirdFourth_onWeek_until,{number:B.number,day:B.day,date:g});}}else{if(k){m=x.substitute(strings.str_cal_summary_recurr_month_more_firstLast_onWeek_until,{x:l.interval,number:B.number,day:B.day,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_secondThirdFourth_onWeek_until,{x:l.interval,number:B.number,day:B.day,date:g});}}}}else{if(l.numInstances){e=l.numInstances;if(l.interval==="1"){if(k){m=x.substitute(strings.str_cal_summary_recurr_month_one_firstLast_onWeek_endsAfter,{number:B.number,day:B.day,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_month_one_secondThirdFourth_onWeek_endsAfter,{number:B.number,day:B.day,n:e});}}else{if(l.interval==="2"){if(k){m=x.substitute(strings.str_cal_summary_recurr_month_two_firstLast_onWeek_endsAfter,{number:B.number,day:B.day,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_month_two_secondThirdFourth_onWeek_endsAfter,{number:B.number,day:B.day,n:e});}}else{if(k){m=x.substitute(strings.str_cal_summary_recurr_month_more_firstLast_onWeek_endsAfter,{x:l.interval,number:B.number,day:B.day,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_secondThirdFourth_onWeek_endsAfter,{x:l.interval,number:B.number,day:B.day,n:e});}}}}}}}else{if(!(l.until)&&!(l.numInstances)){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_month_one_onDay,{day:B.day});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_month_two_onDay,{day:B.day});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_onDay,{x:l.interval,day:B.day});}}}else{if(l.until){if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_month_one_onDay_until,{day:B.day,date:g});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_month_two_onDay_until,{day:B.day,date:g});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_onDay_until,{x:l.interval,day:B.day,date:g});}}}else{if(l.numInstances){e=l.numInstances;if(l.interval==="1"){m=x.substitute(strings.str_cal_summary_recurr_month_one_onDay_endsAfter,{day:B.day,n:e});}else{if(l.interval==="2"){m=x.substitute(strings.str_cal_summary_recurr_month_two_onDay_endsAfter,{day:B.day,n:e});}else{m=x.substitute(strings.str_cal_summary_recurr_month_more_onDay_endsAfter,{x:l.interval,day:B.day,n:e});}}}}}}}}}}}return m;},getReminderSummary:function(){var m=this,l="",h=d.lib.Utils,k,j,g,f=m.get("reminders"),e=f.reminder;if(m.get("hasReminder")){if(f.count===1){j="1";}else{if(f.count===2){j="2";}}g=strings.str_cal_summary_reminder;if(e[0].email&&e[0].messenger){k=strings.str_cal_summary_emailAndMessenger;g=strings.str_cal_summary_reminders;}else{if(e[0].email){k=strings.str_cal_summary_email;}else{if(e[0].messenger){k=strings.str_cal_summary_messenger;}}}l=h.substitute(strings.str_cal_summary_reminderText,{x:j,reminder:g,mode:k});}return l;},clone:function(){var f=this,e=new d.calendar.model.TardisEvent();if(f.get("allDay")){e.set("allDay",f.get("allDay"));}if(f.get("endTime")){e.set("endTime",f.get("endTime"));}if(f.get("startTime")){e.set("startTime",f.get("startTime"));}if(f.get("organizer")){e.set("organizer",f.get("organizer"));}if(f.get("organiser")){e.set("organiser",f.get("organiser"));}if(f.get("organiserCn")){e.set("organiserCn",f.get("organiserCn"));}if(f.get("folder")){e.set("folder",f.get("folder"));}if(f.get("summary")){e.set("summary",f.get("summary"));}if(f.get("location")){e.set("location",f.get("location"));}if(f.get("uid")){e.set("uid",f.get("uid"));}if(f.get("categories").length!==0){e.set("categories",f.get("categories"));}if(f.get("richContent")){e.set("richContent",d.JSON.stringify(f.get("richContent")));}if(f.get("attendees").attendee.length!==0){e.set("attendees",f.get("attendees"));}if(f.get("hasReminder")){e.set("hasReminder",f.get("hasReminder"));}if(!a.isEmpty(f.get("reminders"))||!(f.get("reminders").reminder.length===0)){e.set("reminders",f.get("reminders"));}if(f.get("isRecurring")!==undefined){e.set("isRecurring",f.get("isRecurring"));if(f.get("isRecurring")){e.set("recurrence",f.get("recurrence"));}}if(f.get("category")){e.set("category",f.get("category"));}if(f.get("isSpanner")){e.set("isSpanner",f.get("isSpanner"));}if(f.get("url")){e.set("url",f.get("url"));}if(f.get("description")){e.set("description",f.get("description"));}if(f.get("isOpaque")){e.set("isOpaque",f.get("isOpaque"));}if(f.get("isException")){e.set("isException",f.get("isException"));}if(f.get("isException")){e.set("recurId",f.get("recurId"));}else{e.set("recurId",null);}if(f.get("duration")){e.set("duration",f.get("duration"));}if(f.get("status")){e.set("status",f.get("status"));}if(f.get("eventStatus")){e.set("eventStatus",f.get("eventStatus"));}if(f.get("vClass")){e.set("vClass",f.get("vClass"));}return e;},simplify:function(){var f=this,e={event:{}};if(f.get("uid")){e.event.uid=f.get("uid");}if(f.get("summary")){e.event.summary=f.get("summary");}if(f.get("location")){e.event.location=f.get("location");}if(f.get("url")){e.event.url=f.get("url");}e.event.allDay=f.get("allDay").toString();if(f.get("duration")){e.event.duration=f.get("durattion");}if(f.get("endTime")){if(f.get("allDay")){e.event.endTime=f.get("endTime").toString("yyyyMMdd");}else{e.event.endTime=f.get("endTime").toString("yyyyMMddTHHmmss");}}if(f.get("startTime")){if(f.get("allDay")){e.event.startTime=f.get("startTime").toString("yyyyMMdd");}else{e.event.startTime=f.get("startTime").toString("yyyyMMddTHHmmss");}}if(f.get("startTimeTZID")){if(!f.get("allDay")){e.event.startTimeTZID=f.get("startTimeTZID");}}if(f.get("endTimeTZID")){if(!f.get("allDay")){e.event.endTimeTZID=f.get("endTimeTZID");}}if(f.get("folder")&&f.get("folder") instanceof d.calendar.model.Folder){e.event.folderId=f.get("folder").get("id");}if(f.get("description")){e.event.description=f.get("description");}if(f.get("categories").length!==0){e.event.categories=this.get("categories");}if(f.get("richContent")){e.event.richContent=f.get("richContent");}if(!a.isEmpty(f.get("reminders"))&&f.get("reminders").reminder.length!==0){e.event.reminders={};e.event.reminders=f.get("reminders");}if(f.get("isRecurring")!==undefined){e.event.isRecurring=f.get("isRecurring");if(f.get("isRecurring")){e.event.recurrence={};if(f.get("recurrence").frequency!==""){e.event.recurrence.frequency=f.get("recurrence").frequency;}if(f.get("recurrence").interval!==""){e.event.recurrence.interval=f.get("recurrence").interval;}if(f.get("recurrence").until&&f.get("recurrence").until!==""){e.event.recurrence.until=f.get("recurrence").until.toString("yyyyMMddTHHmmss");}if(f.get("recurrence").numInstances!==""){e.event.recurrence.numInstances=f.get("recurrence").numInstances;}if(f.get("recurrence").byDay&&f.get("recurrence").byDay.length!==0){e.event.recurrence.byDay=f.get("recurrence").byDay;}}}if(f.get("organizer")){e.event.organizer={};e.event.organizer.email=f.get("organizer").email;e.event.organizer.name=f.get("organizer").name;}if(f.get("isSpanner")){e.event.isSpanner=f.get("isSpanner");}if(f.get("isOpaque")){e.event.isOpaque=f.get("isOpaque");}if(f.get("isException")){e.event.isException=f.get("isException");}if(f.get("isException")){e.event.recurId=f.get("recurId");}if(f.get("duration")){e.event.duration=f.get("duration");}if(f.get("status")){e.event.status=f.get("status");}if(f.get("eventStatus")){e.event.eventStatus=f.get("eventStatus");}if(f.get("uri")){e.event.uri={};e.event.uri=f.get("uri");}if(f.get("attendees").attendee.length!==0){e.event.attendees={};e.event.attendees=f.get("attendees");}if(f.get("vClass")){e.event.vClass=f.get("vClass");}if(f.get("referredUid")){e.event.referredUid=f.get("referredUid");}if(f.get("referredOwnerId")){e.event.referredOwnerId=f.get("referredOwnerId");}return e;},isInvite:function(j,g){var l=this,m=l.get("organiser"),e=l.get("attendees"),f=l.get("folder").get("owner"),k={},h,n;if(Config.cfg.isCorp&&(l.get("description")==="--UNFETCHED--DATA--")){if(l.get("organiser")&&(l.get("organiser")!="")&&(l.get("organiser")!==Prefs.yemail)){if(!j){return true;}else{for(h=0;h<e.count;h++){if(Prefs.yemail==e.attendee[h].email){return e.attendee[h].partStat;}}return(j)?"NEEDS_ACTION":true;}}else{for(h=0;h<e.count;h++){if(Prefs.yemail==e.attendee[h].email){return(j)?e.attendee[h].partStat:true;}}return false;}}if(!m||d.Lang.trim(m)==""){return false;}if(!e||!e.count){return false;}if(Prefs.commChannels&&Prefs.commChannels.emails&&Prefs.commChannels.emails.primary){k=[Prefs.commChannels.emails.primary];if(Prefs.yemail!=Prefs.commChannels.emails.primary){k.push(Prefs.yemail);}}for(h in k){if((m===k[h])&&!g){return false;}}if(f){m=a.getYIDFromEmailAddress(m);if((f==m)&!g){return false;}}if(j){for(h=0;h<e.count;h++){for(n in k){if(k[n]==e.attendee[h].email){return e.attendee[h].partStat;}}}return"NEEDS_ACTION";}return true;},generateShortRecurrenceSummary:function(f){var j=this,e=j.get("isRecurring")?(j.get("recurrence").frequency.toLowerCase()):null,n=j.get("recurrence"),g={MO:strings.str_cal_abbr_mon,TU:strings.str_cal_abbr_tue,WE:strings.str_cal_abbr_wed,TH:strings.str_cal_abbr_thu,FR:strings.str_cal_abbr_fri,SA:strings.str_cal_abbr_sat,SU:strings.str_cal_abbr_sun},m,k=[],l=[],h="";if(!e){return null;}switch(e){case"never":m=strings.str_cal_repeat;break;case"daily":day=n.interval;if(day==="1"){m=(!f)?strings.str_cal_ae_daily_repeats:strings.str_cal_ae_daily;}else{if(day==="2"){m=(!f)?strings.str_cal_summary_every_other_day_repeats:strings.str_cal_summary_every_other_day;}else{interval=day;m=a.substitute((!f)?strings.str_cal_summary_every_x_days_repeats:strings.str_cal_summary_every_x_days,{x:interval});}}break;case"weekly":week=n.interval;k=n.byDay;for(i=0;i<k.length;i++){currentDay=g[k[i]];l.push(currentDay);}h=l.join(", ");if(week==="1"){m=a.substitute((!f)?strings.str_cal_summary_every_days_repeats:strings.str_cal_summary_every_days,{dayname:h});}else{if(week==="2"){m=a.substitute((!f)?strings.str_cal_summary_every_other_dayname_repeats:strings.str_cal_summary_every_other_dayname,{dayname:h});}else{interval=week;m=a.substitute((!f)?strings.str_cal_summary_every_week_on_repeats:strings.str_cal_summary_every_week_on,{x:interval,dayname:h});}}break;case"monthly":month=n.interval;if(month==="1"){m=(!f)?strings.str_cal_ae_monthly_repeats:strings.str_cal_ae_monthly;}else{if(month==="2"){m=(!f)?strings.str_cal_summary_every_other_month_repeats:strings.str_cal_summary_every_other_month;}else{if(month!=="month_custom"){interval=month.substring(0,1);m=a.substitute((!f)?strings.str_cal_summary_every_x_months_repeats:strings.str_cal_summary_every_x_months,{x:interval});}}}break;case"yearly":year=n.interval;if(year==="1"){m=(!f)?strings.str_cal_ae_yearly_repeats:strings.str_cal_ae_yearly;}else{if(year==="2"){m=(!f)?strings.str_cal_summary_every_other_year_repeats:strings.str_cal_summary_every_other_year;}else{interval=year.substring(0,1);m=a.substitute((!f)?strings.str_cal_summary_every_x_years_repeats:strings.str_cal_summary_every_x_years,{x:interval});}}break;}return m;}});d.namespace("calendar.model");d.calendar.model.TardisEvent=c;},"1.0.0",{requires:["attribute-base","event-base","calendar-model-component","lib-utils","calendar-model-folder"]});YUI.add("calendar-model-todo",function(b){var a=function(c){var e=this,d={dueOn:{value:""},sortOrder:{value:new Number(Number.MAX_VALUE)},allday:{value:false,setter:function(f){if(typeof f==="string"){if(f.toLowerCase()==="false"){return false;}return true;}return f;}},hasReminder:{value:false},inviteId:{value:""},status:{value:""},completedOn:{value:null},priority:{value:null,setter:function(f){val=f*1;if((val>=1)&&(val<5)){return"13";}else{if(val===5){return"12";}else{if(((val>=6)&&(val<=9))){return"11";}else{if(val===0){return"11";}}}}return f;}}};b.augment(e,b.Attribute);a.superclass.constructor.call(e,c);e.addAttrs(d,c||{});};b.extend(a,b.calendar.model.Component,{clone:function(){var d=this,c=new b.calendar.model.Todo;if(d.get("uid")){c.set("uid",d.get("uid"));}if(d.get("dueOn")){c.set("dueOn",d.get("dueOn"));}if(d.get("sortOrder")){c.set("sortOrder",d.get("sortOrder"));}if(d.get("status")){c.set("status",d.get("status"));}if(d.get("summary")){c.set("summary",d.get("summary"));}if(d.get("description")){c.set("description",d.get("summary"));}return c;}});b.namespace("calendar.model");b.calendar.model.Todo=a;},"1.0.0",{requires:["attribute-base","event-base","calendar-model-component"]});YUI.add("lib-utils-stats",function(a){var k=a.JSON,c=a.lib.Utils,g={},j={timers:[],counters:{}},d={},h="",e={defView:Prefs.initialView,currView:Prefs.initialView,test:Config.cfg.sampleId,ck:{},_S:967178001,_s:967178001};var f=function(l){var m=this;m.isLaunch=true;};f.prototype={startTimer:function(l){if(Config.statsEnabled){g[l]=new b(l);}},stopTimer:function(m,l){var o=this,n=g[m];if(n){n.stop();if(!l){if(n.d){j.timers.push({key:m,value:n.d});}}}},addErrorLog:function(l){if(!d[l]){d[l]=0;}d[l]++;},addCounter:function(l){if(!j.counters[l]){j.counters[l]=0;}j.counters[l]++;},addOneTimeStat:function(l,m){j.counters[l+":"+m]=1;},ultTracker:function(l,n){if(!Config.cfg.isUltEnabled||!l){return;}if(n&&!c.isEmpty(e.ck)){return;}e.ck=l;if(e.ck&&!n){e.intl=Config.intl;e.cobrand=Config.cobrand;a.use("calendar-model-datamodel",function(){e.currView=a.calendar.model.dataModel.get("currentView");});var m={method:"POST",headers:{"Content-Type":"application/json"},data:k.stringify({ult:e}),success:function(){e.ck={};},failure:function(p){if(p.status==403){}}};new a.lib.Net().exec(Config.docRoot+"stat?wssid="+Config.crumb,m);}},setUpULTData:function(l){if(!Config.cfg.isUltEnabled){return;}a.use("calendar-model-datamodel",function(){var m=a.calendar.model.dataModel;e.currView=m.get("previousView");m.set("previousView",m.get("currentView"));});e._S=(h!="")?h:l;e._s=l;},reset:function(l){j.timers=[];j.counters={};d={};if(!l){e.ck={};}},fireInstantStat:function(l){var m=new a.lib.Net().exec(Config.docRoot+"stat?wssid="+Config.crumb,{method:"POST",headers:{"Content-Type":"application/json"},data:k.stringify({rs:l})});},takeStatsSnapShot:function(l){var m=a.clone(j);l.timers=m.timers;l.counters=m.counters;l.loggers={};for(i in d){l.loggers[i]=d[i];}l.ck=e.ck;},mergeFromSnapShot:function(l){var m=this;for(timer in l.timers){j.timers.push(l.timers[timer]);}for(counter in l.counters){m.addCounter(counter);}for(log in l.loggers){m.addErrorLog(log);}e.ck=l.ck;},stampPage:function(s,l,p){var q=this,m={};q.takeStatsSnapShot(m);q.setUpULTData(s);var r="userAgent:-"+a.UA.userAgent+" previousSpaceid :- "+h+" currentSpaceId :-"+s,o={rs:j,loggers:d,loggersString:r,ult:(Config.cfg.isUltEnabled&&!c.isEmpty(e.ck))?e:false,stamp:{spaceId:s,intl:Config.intl,cobrand:Config.cobrand}},n={method:"POST",headers:{"Content-Type":"application/json"},data:k.stringify(o),success:function(){},failure:function(u){if(u.status==403){}q.mergeFromSnapShot(m);}},t="stat";q.reset();a.later(0,null,function(){var w;if(l&&"undefined"!=typeof(rt_Done)){rt_SetSpaceid(Config.hotlistOffset+s*1);w=rt_Done();if("perf" in Config.urlArgs){if(w.indexOf("t_done")!==-1){Perf.rt=w.match(/t_done=(\d*)/)[1]*1;if(q.isLaunch){Perf.t2=Perf.rt-((new Date()).getTime()-Perf.t2);}}var u=new Date().getTime();var v=a.Node.create('<div id="cal_perf" perf_rt='+Perf.rt+" endtime="+u+"></div>");a.one("body").appendChild(v);}}if(q.isLaunch){t="launchStat";q.isLaunch=false;}var x=new a.lib.Net().exec(Config.docRoot+t+"?pid="+s+"&wssid="+Config.crumb,n);a.fire("PageStamped");});h=s;},sendOutStatsAndLogs:function(){var q=this,m={};q.takeStatsSnapShot(m);var p="userAgent:-"+a.UA.userAgent,l={rs:j,loggers:d,loggersString:p},n={method:"POST",headers:{"Content-Type":"application/json"},data:k.stringify(l),success:function(){},failure:function(r){if(r.status==403){}q.mergeFromSnapShot(m);}},o="stat";q.reset(true);a.later(0,null,function(){var r=new a.lib.Net().exec(Config.docRoot+o+"?&wssid="+Config.crumb,n);});}};var b=function(l){var m=this;m.key=l;m.d=0;m.startTime=0;m.start();};b.prototype={start:function(){var l=this;l.startTime=new Date().getTime();},stop:function(){var l=this;l.d=(new Date().getTime())-l.startTime;}};a.namespace("lib.utils");a.lib.utils.Stats=new f();},"1.0.0",{requires:["lib-net","json","json-stringify","lib-utils"]});YUI.add("calendar-model-calservice",function(g){var f=g.JSON,c=g.lib.utils.Stats;var e=function(k){var h={};try{h.responseText=f.parse(k.responseText||"{}");}catch(j){if(k.responseText!==""){h.error="JSON Parse Error";g.log("_validateJSON parse error : "+k.responseText);}}return h;};var d=function(k,h,j,m,o){var p=Config.cfg.xhrTimeOut,l=j||{},n=k;if(!l.headers){l.headers={};}if(!l.timeout&&parseInt(p)){l.timeout=parseInt(p);}if(Config.isDebugEnabled){k=k+"&debug=true";}l.headers["Accept-Language"]="en-US";h.success&&(l.success=function(r){var q=e(r);if(m){c.stopTimer(m);}if(!q.error){h.success(q);}else{if(h.failure){h.failure({responseText:q,status:r.status,requestedURL:r.requestedURL,requestedOp:r.requestedOp,statusText:r.statusText});}}});h.failure&&(l.failure=function(r){var q=e(r);if(m){c.stopTimer(m,"error");}if(b(r)&&!o&&(Config.crumb||Config.wssid)){d("/?getWssid",{success:function(v){if(v.responseText&&v.responseText.crumb&&v.responseText.wssid){var s,u;Config.wssid=v.responseText.wssid;Config.crumb=v.responseText.crumb;Config.authToken="&wssid="+Config.crumb;s=n.split("&");for(u in s){if(s[u].search("wssid=")===0){s[u]="wssid="+Config.crumb;}}n=s.join("&");d(n,h,j,m,true);}},failure:function(s){}},null,"getNewWssid");}else{h.failure({responseText:q,status:r.status,requestedURL:r.requestedURL,requestedOp:r.requestedOp,statusText:r.statusText});}});c.startTimer(m);if(l.method=="DELETE"){l.data="";}return new g.lib.Net().exec(k,l);};function b(j){var h=false;if(j.status===403&&(j.responseText&&g.JSON.parse(j.responseText).error&&(g.JSON.parse(j.responseText).error.ec1==="4030"))){h=true;}return h;}var a=function(h){var j=this;j.filterFolders=false;};a.prototype={getEventDetails:function(l,h){var j={success:function(m){if(m.responseText.event){h.success({events:[m.responseText.event]});}},failure:h.failure},k="";if(l.fid){k="&folderids="+l.fid;}if(l.uid){l.uid=l.uid.replace(/\//g,"frontslash");}if(l.inviteId){d("/ws/v2/event/inviteid/"+encodeURIComponent(l.inviteId)+"/?format=json&wssid="+Config.crumb+k,j,null,"getEventDetails");}else{if(l.recurId){d("/ws/v2/event/"+encodeURIComponent(l.uid)+"/recurid/"+encodeURIComponent(l.recurId)+"/?format=json&wssid="+Config.crumb+k,j,null,"getEventDetails");}else{d("/ws/v2/event/"+encodeURIComponent(l.uid)+"/?format=json&wssid="+Config.crumb+k,j,null,"getEventDetails");}}},getInviteDetails:function(l,h){var k={success:function(m){if(m.responseText.event){h.success({events:[m.responseText.event]});}},failure:h.failure},j=Config.authToken;if(!l.owner&&Config.owner){l.owner=Config.owner;}if(l.recurId){d("/ws/v2/user/"+l.owner+"/event/"+encodeURIComponent(l.uid)+"/recurid/"+encodeURIComponent(l.recurId)+"/?format=json"+j,k,null,"getInviteDetails");}else{d("/ws/v2/user/"+l.owner+"/event/"+encodeURIComponent(l.uid)+"/?format=json"+j,k,null,"getInviteDetails");}},synchPoll:function(p,o,j){var n={success:function(q){j.success(q.responseText);},failure:j.failure},m=Config.authToken,l=(p.synchToken)?("&synctoken="+encodeURIComponent(p.synchToken)):"",k=(p.dtstart)?("&dtstart="+encodeURIComponent(p.dtstart.toString("yyyyMMdd"))):"",h=(p.dtend)?("&dtend="+encodeURIComponent(p.dtend.toString("yyyyMMdd"))):"";d("ws/v2/folder/133/poll/?format=json"+m+l+k+h,n,null,"pollSynch");},getEvents:function(o,h){var p=this,m="/ws/v2/events/",l={success:function(r){var q={};q.startDate=o.dtstart;q.endDate=o.dtend;if(o.uid){q.uid=o.uid;}q.events=[];if(r.responseText.events&&r.responseText.events.event){q.events=r.responseText.events.event;}h.success(q);},failure:function(q){h.failure(q);}},n=[],k,j="";if(o!=null&&o.st&&o.st!=null){j="&st="+encodeURIComponent(o.st);}if(Config.cfg.isCorp&&!("detail" in o)){o.detail="true";}for(k in o){if(k!=="st"){n.push(k+"="+encodeURIComponent(o[k].toString("yyyyMMdd")));}}if(p.filterFolders){n.push("folderids="+g.Object.keys(p.filterFolders).join(","));if(Config.isEntityView){n.push("inchidden=true");}}if(Config.owner){d("/ws/v2/user/"+Config.owner+"/events;"+n.join(";")+"?format=json"+Config.authToken+j,l,null,"getEvents");}else{d(m+";"+n.join(";")+"?format=json&wssid="+Config.crumb+j,l,null,"getEvents");}},getTodos:function(k,m){var p=this,j="/ws/v2/todos/",q={success:function(t){var s={};if(k!==null){if(k.dtstart!==undefined&&k.dtend!==undefined){s.startDate=k.dtstart;s.endDate=k.dtend;}}s.todos=[];if(t.responseText.todos.todo){s.todos=t.responseText.todos.todo;}m.success(s);},failure:function(s){m.failure(s);}},h=[],r,n,o="",l="";if(p.filterFolders){o=";folderids="+g.Object.keys(p.filterFolders).join(",");}if(k!==null){if(k.dtstart===undefined&&k.dtend===undefined){if(k==="allNotDone"){n="NC";}else{if(k==="done"){n="OC";}}d(j+";status="+n+o+";?format=json&wssid="+Config.crumb,q,null,"getTodos");}else{if(k.st&&k.st!=null){l="&st="+encodeURIComponent(k.st);}for(r in k){if(r!=="st"){h.push(r+"="+encodeURIComponent(k[r].toString("yyyyMMdd")));}}d(j+";"+h.join(";")+o+"?format=json&wssid="+Config.crumb+l,q,null,"getTodos");}}else{d(j+";status=NC"+o+"?format=json&wssid="+Config.crumb,q,null,"getTodos");}},getFolders:function(n,h){var l="/ws/v2/folders/",k={success:function(p){g.use("calendar-model-folder",function(u){var t=p.responseText,s,o=t.folders.count,r={},q=t.folders.folder;for(s=0;s<o;s++){r[q[s].id]=new u.calendar.model.Folder(q[s]);}h.success(r);});},failure:function(p){h.failure(p);}};var m=[];for(var j in n){m.push(j+"="+n[j]);}if(Config.owner){d("/ws/v2/user/"+Config.owner+"/folders;"+m.join(";")+"?format=json"+Config.authToken,k,null,"getFolders");}else{d(l+";"+m.join(";")+"?format=json&wssid="+Config.crumb,k,null,"getFolders");}},createFolder:function(j,h){var l="/ws/v2/folder/",k={success:function(m){if(m.responseText.folder){h.success(m.responseText.folder);}},failure:function(m){h.failure(m);}};d(l+"?format=json&wssid="+Config.crumb,k,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:f.stringify(j)});},deleteFolder:function(j,h){var l="/ws/v2/folder/",k={success:function(m){h.success(m.responseText);},failure:function(m){h.failure(m);}};if(j.type==="folder"){d(l+j.id+";?format=json&wssid="+Config.crumb,k,{method:"DELETE",headers:{"Content-Type":"application/json"}});}else{d(l+j.id+"/events;?format=json&wssid="+Config.crumb,k,{method:"DELETE",headers:{"Content-Type":"application/json"}});}},editFolder:function(m,j,h){var l="/ws/v2/folder/",k={success:function(n){if(n.responseText.folder){h.success(n.responseText.folder);}},failure:function(n){h.failure(n);}};if(m){d(l+j.folder.id+"?format=json&wssid="+Config.crumb+"&reset="+m,k,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(j)});}else{d(l+j.folder.id+";?format=json&wssid="+Config.crumb,k,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(j)});}},updateEvents:function(m,o,p){var l,t=m.length,r={events:[]},n,s=o.captchaData,h,k,q,v={success:function(x){if(x.responseText.event){r.events.push(x.responseText.event);}t--;if(t===0){p.success(r);}},failure:function(x){p.failure(x);}},j=[],w,u="";if(s&&s!==null&&s!=""){n={"Content-Type":"application/json","X-HumanVerification-Cdata":s.cdata,"X-HumanVerification-Lang":s.lang,"X-HumanVerification-ClassInfo":s.classInfo,"X-HumanVerification-View":s.view,"X-HumanVerification-Answer":s.answer};if(s.view=="visual"){n["X-HumanVerification-ImageId"]=s.visual.testId;}else{if(s.view=="audio"){n["X-HumanVerification-AudioId"]=s.audio.testId;}else{n={"Content-Type":"application/json"};}}}else{n={"Content-Type":"application/json"};}l="/ws/v2/event/";if(o.partial){u="&partial=true";}for(q in m){if(m[q].event.recurId){h=l+encodeURIComponent(m[q].event.uid)+"/recurid/"+encodeURIComponent(m[q].event.recurId)+"/;";}else{if(o.split){h=l+encodeURIComponent(m[q].event.uid)+"/split/";}else{h=l+encodeURIComponent(m[q].event.uid)+"/;";}}}if(o.src_folder_id&&o.target_folder_id){k=h+"?format=json&wssid="+Config.crumb+"&src_folder_id="+o.src_folder_id+"&target_folder_id="+o.target_folder_id+u;}else{k=h+"?format=json&wssid="+Config.crumb+u;}d(k,v,{method:"PUT",headers:n,data:f.stringify(m[q])});},updateTodo:function(k,l,m){var j="/ws/v2/todo/",p=k.length,n={todos:[]},o,q={success:function(s){if(s.responseText.todo){n.todos.push(s.responseText.todo);}p--;if(p===0){l.success(n);}},failure:function(s){l.failure(s);}},h=[],r;for(o in k){if(k[o].todo.status&&(k[o].todo.status==="NEEDS_ACTION")){if(k[o].todo.completedOn){delete k[o].todo.completedOn;}}if(m&&m.folderMoveInfo[o]){d(j+encodeURIComponent(k[o].todo.uid)+"/?format=json&wssid="+Config.crumb+"&src_folder_id="+m.folderMoveInfo[o].src_folder_id+"&target_folder_id="+m.folderMoveInfo[o].target_folder_id,q,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(k[o])});}else{d(j+encodeURIComponent(k[o].todo.uid)+"/?format=json&wssid="+Config.crumb,q,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(k[o])});}}},deleteTodo:function(m,h,j){var l="/ws/v2/todo/",k={success:function(){h.success();},failure:function(n){h.failure(n);}};d(l+encodeURIComponent(m.uid)+"/?format=json&wssid="+Config.crumb+"&folderId="+j.fid,k,{method:"DELETE",headers:{"Content-Type":"application/json"}});},addEvent:function(j,m,n){var p={events:[]},l,q=m.captchaData,k=m.owner,h="",o,r={success:function(s){if(s.responseText.event){p.events.push(s.responseText.event);}n.success(p);},failure:function(s){n.failure(s);}};if(q&&q!==null&&q!=""){l={"Content-Type":"application/json","X-HumanVerification-Cdata":q.cdata,"X-HumanVerification-Lang":q.lang,"X-HumanVerification-ClassInfo":q.classInfo,"X-HumanVerification-View":q.view,"X-HumanVerification-Answer":q.answer};if(q.view=="visual"){l["X-HumanVerification-ImageId"]=q.visual.testId;}else{if(q.view=="audio"){l["X-HumanVerification-AudioId"]=q.audio.testId;}else{l={"Content-Type":"application/json"};}}}else{l={"Content-Type":"application/json"};}if(m.setdefrem){h="/ws/v2/event/?format=json&wssid="+Config.crumb+"&setdefrem="+m.setdefrem;}else{h="/ws/v2/event/?format=json&wssid="+Config.crumb;}d(h,r,{method:"POST",headers:l,data:f.stringify(j)});},addTodo:function(j,h,n){var l="/ws/v2/todo/",m,k={success:function(p){m={todos:[]};if(p.responseText.todo){m.todos.push(p.responseText.todo);h.success(m);}},failure:function(p){h.failure(p);}};d(l+"?format=json&wssid="+Config.crumb,k,{method:"POST",headers:{"Content-Type":"application/json"},data:f.stringify(j)});},getSharedCalendars:function(l,h){var k="/ws/v2/user/",j={success:function(r){var q=[],n,p,m;if(r.responseText!==undefined){n=r.responseText.folders.count;p=r.responseText.folders.folder;for(m in p){q.push({id:p[m].id,name:p[m].name,type:p[m].type,lang:p[m].lang,isRemShareAllowed:p[m].isRemShareAllowed});}h.success(q,n);}else{h.failure();}},failure:function(m){h.failure(m);}};d(k+l+"/folders/?format=json&wssid="+Config.crumb,j,null);},deleteEventsByUids:function(k,h){var n=(Config.owner)?Config.owner:Config.yid,l=k.length,j=0,m={success:function(o){j++;(j==l)&&h&&h.success&&h.success(o);},failure:function(o){h&&h.failure&&h.failure(o);}};for(i in k){sUrl="/ws/v3/users/"+n+"/calendars/events/"+encodeURIComponent(k[i])+"/;",d(sUrl+"?format=json&wssid="+Config.crumb,m,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});}},deleteEvents:function(k,m,l){var j,r=k.repeat,q=k.events.length,p={events:[]},h=[],n="",s,o;for(o in k.events){s=function(u){var t={success:function(v){p.events.push(k.events[u]);q--;if(q===0){m.success(p);}},failure:function(v){m.failure(v);}};return t;};j="/ws/v2/event/";switch(r){case"all":n=j+encodeURIComponent(k.events[o].event.uid)+"/;";break;case"single":if(k.events[o].event.rid){n=j+encodeURIComponent(k.events[o].event.uid)+"/recurid/"+encodeURIComponent(k.events[o].event.rid)+"/;";}else{n=j+encodeURIComponent(k.events[o].event.uid)+"/;";}break;}d(n+h.join(";")+"?format=json&wssid="+Config.crumb+"&folderId="+l,s(o),{method:"DELETE",headers:{"Content-Type":"application/json"}});}},deleteEventsBatch:function(p,h){var o="/ws/v2/events/delete/",k=[],m,l,n={success:function(j){h.success(j);},failure:function(j){h.failure(j);}};d(o+";?format=json&wssid="+Config.crumb,n,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(p)});},moveEventsBatch:function(p,h){var o="/ws/v2/events/move/",k=[],m,l,n={success:function(j){h.success(j);},failure:function(j){h.failure(j);}};d(o+";?format=json&wssid="+Config.crumb,n,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(p)});},getFreeBusyStatus:function(k,j){var h=d("/ws/v2/fbusy/?format=json&wssid="+Config.crumb,j,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:f.stringify(k)});return h;},getWeather:function(j){var h=d("?weather&lang="+Config.lang,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;},getCalendarTheme:function(k,j){var h=d("/calTheme/?"+k,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;},searchInterestingCals:function(l,j){var k="/ws/v3/services/discovery/search?"+l.dUrl+"intl=en&wssid="+Config.crumb,h=d(k,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;},getSportsSearchTags:function(j,k){var l="?upcomingSports&stHash="+k,h=d(l,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;},getUpcomingSports:function(l,j){var k="/ws/v3/services/discovery/personal?lang="+Config.lang+"&location="+l.locationName+"&access=public&wssid="+Config.crumb,h=d(k,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;},getInterestingCalendars:function(l,j){var k="/ws/v3/services/discovery/?"+l.dUrl+"intl=en&wssid="+Config.crumb,h=d(k,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;},getGrpOptions:function(j,h){this.getOptions(j,h);},updateGrpOptions:function(j,h){this.updateOptions(j,h);},getOptions:function(l,h){var k=(Config.cfg.loadRemoteOptions)?"/ws/v2/user/"+Config.args.eid+"/options/":"/ws/v2/options/",j={success:function(n){var m={};if(n.responseText.Options){m.options=n.responseText.Options;}h.success(m);},failure:function(m){h.failure(m);}};d(k+"?format=json&wssid="+Config.crumb,j,null);},updateOptions:function(j,h){var m=(Config.cfg.loadRemoteOptions)?"/ws/v2/user/"+Config.args.eid+"/options/":"/ws/v2/options/",n={},k,l={success:function(p){h.success();},failure:function(p){h&&h.failure&&h.failure(p);}};d(m+"?format=json&wssid="+Config.crumb,l,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(j)});},replyRSVP:function(n,m,h){var l,k={success:function(p){h.success(p);},failure:function(p){h.failure(p);}},j;if(!n.recurid){j="/ws/v2/event/"+encodeURIComponent(n.uid)+"/rsvp/?format=json";}else{j="/ws/v2/event/"+encodeURIComponent(n.uid)+"/recurid/"+encodeURIComponent(n.recurid)+"/rsvp/?format=json";}d(j+Config.authToken,k,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(m)},"replyRSVP");},updateRSVP:function(n,m,h){var l,k={success:function(p){h.success(p);},failure:function(p){h.failure(p);}},j;l=Config.authToken+"&invitee="+Config.args.e+"&hh="+Config.args.hh;if(n.recurId){j="/ws/v2/user/"+n.organizer+"/rsvp/event/"+encodeURIComponent(n.uid)+"/recurid/"+encodeURIComponent(n.recurId)+"/?format=json";}else{j="/ws/v2/user/"+n.organizer+"/rsvp/event/"+encodeURIComponent(n.uid)+"/?format=json";}d(j+l,k,{method:"PUT",headers:{"Content-Type":"application/json"},data:f.stringify(m)},"updateRSVP");},getJournalFolders:function(j,h){},deleteJournalFolder:function(j,h){},getJournals:function(l,h){var m=this,j={success:function(n){h.success(n);},failure:function(n){h.failure(n);}},k=(l.fid)?"&FOLDER_ID="+l.fid:"";d("/ws/cal/1/GET_JOURNALS?bn="+Config.bn+"&RETURN_R=Y&RETURN_COMPONENT=true"+k,j,null,"getJournals");},updateNote:function(k,n,h){var m="/ws/cal/1/UPDATE_JOURNAL?bn="+Config.bn+"&UID="+n.uid+"&RETURN_R=Y&RETURN_COMPONENT=true",j="",l={success:function(p){h.success(p);},failure:function(p){h.failure(p);}};if(n.fid){j="&FOLDER_ID="+n.fid;}d(m+j,l,{method:"POST",headers:{"Content-Type":"application/json"},data:f.stringify(k)},"updateNote");},addNote:function(j,m,h){var l="/ws/cal/1/ADD_JOURNAL?bn="+Config.bn+"&FOLDER_ID="+m.folderId+"&RETURN_R=Y&RETURN_COMPONENT=true",k={success:function(n){h.success(n);},failure:function(n){h.failure(n);}};d(l,k,{method:"POST",headers:{"Content-Type":"application/json"},data:f.stringify(j)},"addNote");},deleteNote:function(m,h){var j=m.uid,l="/ws/cal/1/REMOVE_JOURNAL?bn="+Config.bn+"&UID="+j,k={success:function(n){h.success(n);},failure:function(n){h.failure(n);}};d(l,k,null,"deleteNote");},searchNotes:function(l,h){var m=this,j={success:function(n){h.success(n);},failure:function(n){h.failure(n);}},k="&SEARCHTERM="+l;d("/ws/cal/1/GET_JOURNALS?bn="+Config.bn+"&RETURN_R=Y&RETURN_COMPONENT=true"+k,j,null,"searchNotes");},getMailUserData:function(j){var k="?getMailUserData&appid=YahooMailOptions&wssid="+Config.wssid,h;if("_asrv" in Config.args){k=k+"&_asrv="+Config.args._asrv;}h=d(k,j,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return h;}};g.namespace("calendar.model");g.calendar.model.calServiceAbstract=a;g.calendar.model.calService=new a();},"1.0.0",{requires:["lib-net","json","json-stringify","lib-utils-stats"]});YUI.add("calendar-model-calservice-tardis",function(h){var g=h.JSON,d=h.lib.utils.Stats;var f=function(m){var k={};try{k.responseText=g.parse(m.responseText||"{}");}catch(l){if(m.responseText!==""){k.error="JSON Parse Error";h.log("_validateJSON parse error : "+m.responseText);}}return k;};var a=function(k){var m=/\/calendars\/undefined\//;if(m.test(k)){var n=new Error("invalidUrlCheck");var l=/\((http|https):\/\/.*\)/g;null.token();d.addErrorLog("MLog:"+g.stringify({yid:Config.yid,msg:"error:invalidUrl:undefinedCalendarId url:"+k+" stackTrace:"+n.stack.replace(l,"")}));}else{return;}};var e=function(k,p,r,t,o){var n=Config.cfg.xhrTimeOut,l=r||{},q=k;var m="";if(r&&r.email&&r.email!=""){m=r.email;}if(!l.headers){l.headers={accept:"application/json"};}try{a(k);}catch(s){}if(!l.timeout&&parseInt(n)){l.timeout=parseInt(n);}if(Config.isDebugEnabled){k=k+"&debug=true";}if("_tsrv" in Config.args){k=k+"&_tsrv="+Config.args._tsrv;}l.headers["Accept-Language"]="en-US";p.success&&(l.success=function(v){var u=f(v);if(t){d.stopTimer(t);}if(!u.error){p.success(u,m);}else{if(p.failure){p.failure({responseText:u,status:v.status,requestedURL:v.requestedURL,requestedOp:v.requestedOp,statusText:v.statusText,WSHost:v.getResponseHeader("WSHost")},m);}}});p.failure&&(l.failure=function(v){var u=f(v);if(t){d.stopTimer(t,"error");}if(c(v)&&!o&&(Config.crumb||Config.wssid)){e("/?getWssid",{success:function(y){if(y.responseText&&y.responseText.crumb&&y.responseText.wssid){var w,x;Config.wssid=y.responseText.wssid;Config.crumb=y.responseText.crumb;Config.authToken="&wssid="+Config.crumb;w=q.split("&");for(x in w){if(w[x].search("wssid=")===0){w[x]="wssid="+Config.crumb;}}q=w.join("&");e(q,p,r,t,true);}},failure:function(w){}},null,"getNewWssid");}else{p.failure({responseText:u,status:v.status,requestedURL:v.requestedURL,requestedOp:v.requestedOp,statusText:v.statusText,WSHost:v.getResponseHeader("WSHost")},m);}});d.startTimer(t);if(l.method=="DELETE"){l.data="";}return new h.lib.Net().exec(k,l);};function c(k){var l=false;if((k.status===401)&&(k.responseText&&f(k)&&f(k).responseText&&f(k).responseText.calendarError&&(f(k).responseText.calendarError.code===403))){l=true;}return l;}var b=function(k){var l=this;l.filterFolders=false;};h.extend(b,h.calendar.model.calServiceAbstract,{getEventDetails:function(p,l){var n={success:function(r){var q={};q.events=[];if(r.responseText.events&&r.responseText.events.event){q.events=r.responseText.events.event;}l.success(q);},failure:l.failure},k="",m="",o="";if(p.uid){p.uid=p.uid.replace(/\//g,"frontslash");}if(p.recurId){k="/instances/"+encodeURIComponent(p.recurId);}if(p.fid){m="/"+encodeURIComponent(p.fid);o="&folderids="+p.fid;}if(Config.args.eid&&Config.args.efid){p.owner=Config.args.eid;}if(p.inviteId){e("/ws/v2/event/inviteid/"+encodeURIComponent(p.inviteId)+"/?format=json&wssid="+Config.crumb+o,n,null,"getEventDetails");}else{if(p.owner){e("/ws/v3/users/"+p.owner+"/calendars"+m+"/events/"+encodeURIComponent(p.uid)+k+"/?wssid="+Config.crumb,n,null,"getEventDetails");}else{e("/ws/v3/users/"+Config.yid+"/calendars"+m+"/events/"+encodeURIComponent(p.uid)+k+"/?wssid="+Config.crumb,n,null,"getEventDetails");}}},getInviteDetails:function(o,l){var n={success:function(p){if(p.responseText.events&&p.responseText.events.count){l.success({events:[p.responseText.events.event[0]]});}},failure:l.failure},m=Config.authToken,k="";if(!o.owner&&Config.owner){o.owner=Config.owner;}else{o.owner=Config.yid;}if(o.recurId){k="/instances/"+encodeURIComponent(o.recurId);}e("/ws/v3/users/"+o.owner+"/calendars/events/"+encodeURIComponent(o.uid)+k+"/?wssid="+Config.crumb,n,null,"getInviteDetails");},searchEvents:function(o,k){var p=this,m={success:function(r){var q={};q.startDate=o.dtstart;q.endDate=o.dtend;if(o.uid){q.uid=o.uid;}q.events=[];q.todos=[];if(r.responseText.calendaritems.events){q.events=r.responseText.calendaritems.events;}if(r.responseText.calendaritems.todos){q.todos=r.responseText.calendaritems.todos;}k.success(q);},failure:function(q){k.failure(q);}},n=[],l=Config.yid;if(Config.owner){l=Config.owner;}if(Config.args.eid&&Config.args.efid){l=Config.args.eid;}n.push("kw="+o.st);n.push("count=200");n.push("dtstart="+o.dtstart.toString("yyyyMMdd"));n.push("dtend="+o.dtend.toString("yyyyMMdd"));e("/ws/v3/users/"+l+"/items?format=json&"+n.join("&")+Config.authToken,m,null,"getEvents");},getEvents:function(p,r){var s=this,u={success:function(x){var w={};w.startDate=p.dtstart;w.endDate=p.dtend;if(p.uid){w.uid=p.uid;}w.events=[];if(x.responseText.events&&x.responseText.events.event){w.events=x.responseText.events.event;}r&&r.success(w);},failure:function(w){r&&r.failure(w);}},k=[],v,t="",m="",q="",l="",o="",n=(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid;if(p.urlType==="ics"){m+="/export?";if("_tsrv" in Config.args){m+="_tsrv="+Config.args._tsrv+"&";}}else{m+="/?format=json&";}if(p.st&&p.st!=null){return b.superclass.getEvents.apply(s,[p,r]);}if(p!=null&&p.st&&p.st!=null){q="&st="+encodeURIComponent(p.st);}if(!p.urlType){for(v in p){if(v!=="st"){k.push(v+"="+encodeURIComponent(p[v].toString("yyyyMMdd")));}}}if(p.fid){l="/"+encodeURIComponent(p.fid);}if(p.uids){o="/"+encodeURIComponent(p.uids);}if(s.filterFolders){if(Config.isEntityView){k.push("inchidden=true");}}if(Config.owner){n=Config.owner;}if(Config.args.eid&&Config.args.efid){n=Config.args.eid;}t="/ws/v3/users/"+n+"/calendars"+l+"/events"+o+m+k.join("&")+Config.authToken+q;if(p.urlType){return t;}e(t,u,null,"getEvents");},getFolders:function(q,k){var n="/ws/v3/users/",m={success:function(r){h.use("calendar-model-folder",function(x){var w=r.responseText,v,s=w.folders.count,u={},t=w.folders.folder;for(v=0;v<s;v++){u[t[v].id]=new x.calendar.model.Folder(t[v]);}k.success(u);});},failure:function(r){k.failure(r);}},o;var p=[];for(var l in q){p.push(l+"="+q[l]);}if(Config.owner){o=Config.owner;}else{o=Config.yid;}e(n+o+"/calendars?"+p.join("&")+"&format=json"+Config.authToken,m,null,"getFolders");},addEvent:function(m,q,r){var u={events:[]},w=this,o,v=q.captchaData,n=q.owner,p=(Config.owner)?Config.owner:(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid,l="",t,s,x={success:function(y){if(y.responseText.event){u.events.push(y.responseText.event);}r.success(u);},failure:function(y){if(y.responseText&&y.responseText.responseText&&y.responseText.responseText.captcha&&y.responseText.responseText.captcha.audio.cplayerUrl){y.responseText.responseText.captcha.audio.CPlayerUrl=y.responseText.responseText.captcha.audio.cplayerUrl;}r.failure(y);}},k=["monday through friday","saturdays and sundays","mondays, wednesdays and fridays","tuesdays and thursdays"],s;if(!Config.isTardisRW){return b.superclass.addEvent.apply(w,[m,q,r]);}if(v&&v!==null&&v!=""){o={Accept:"application/json","Content-Type":"application/json","X-HumanVerification-Cdata":v.cdata,"X-HumanVerification-Lang":v.lang,"X-HumanVerification-ClassInfo":v.classInfo,"X-HumanVerification-View":v.view,"X-HumanVerification-Answer":v.answer};if(v.view=="visual"){o["X-HumanVerification-ImageId"]=v.visual.testId;}else{if(v.view=="audio"){o["X-HumanVerification-AudioId"]=v.audio.testId;}else{o={Accept:"application/json","Content-Type":"application/json"};}}}else{o={Accept:"application/json","Content-Type":"application/json"};}if(m.event.recurrence&&m.event.recurrence.count){m.event.recurrence.numInstances=m.event.recurrence.count;delete m.event.recurrence.count;}if(m.event.recurrence&&m.event.recurrence.frequency){for(s in k){if(k[s].toUpperCase()===m.event.recurrence.frequency){m.event.recurrence.frequency="WEEKLY";break;}}}if(!m.event.reminders&&!q.setdefrem){m.event.reminders={reminder:[]};}else{if(m.event.reminders&&m.event.reminders.reminder.length>0){for(s in m.event.reminders.reminder){if(m.event.reminders.reminder[s].email||Config.context=="groups"){m.event.reminders.reminder[s].sendEmail=true;}if(m.event.reminders.reminder[s].messenger){m.event.reminders.reminder[s].sendIM=true;}}}}l="/ws/v3/users/"+p+"/calendars/"+m.event.folderId+"/events/?format=json&wssid="+Config.crumb;e(l,x,{method:"POST",headers:o,data:g.stringify(m)});},updateEvents:function(p,s,w){var x,m=(Config.owner)?Config.owner:(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid,r=p.length,E={events:[]},y=this,n,o="PUT",D=s.captchaData,q,C,A,z,u={success:function(F){if(F.responseText.event){E.events.push(F.responseText.event);}r--;if(r===0){w.success(E);}},failure:function(F){if(F.responseText&&F.responseText.responseText&&F.responseText.responseText.captcha&&F.responseText.responseText.captcha.audio.cplayerUrl){F.responseText.responseText.captcha.audio.CPlayerUrl=F.responseText.responseText.captcha.audio.cplayerUrl;}w.failure(F);}},l,v=[],B,k="",t=["monday through friday","saturdays and sundays","mondays, wednesdays and fridays","tuesdays and thursdays"],z;if(!Config.isTardisRW){return b.superclass.updateEvents.apply(y,[p,s,w]);}if(D&&D!==null&&D!=""){n={Accept:"application/json","Content-Type":"application/json","X-HumanVerification-Cdata":D.cdata,"X-HumanVerification-Lang":D.lang,"X-HumanVerification-ClassInfo":D.classInfo,"X-HumanVerification-View":D.view,"X-HumanVerification-Answer":D.answer};if(D.view=="visual"){n["X-HumanVerification-ImageId"]=D.visual.testId;}else{if(D.view=="audio"){n["X-HumanVerification-AudioId"]=D.audio.testId;}else{n={Accept:"application/json","Content-Type":"application/json"};}}}else{n={Accept:"application/json","Content-Type":"application/json"};}if(s.src_folder_id&&s.target_folder_id){l=s.src_folder_id;}else{l=p[0].event.folderId;}if(p[0].event.recurrence&&p[0].event.recurrence.count){p[0].event.recurrence.numInstances=p[0].event.recurrence.count;delete p[0].event.recurrence.count;}if(p[0].event.recurrence&&p[0].event.recurrence.frequency){for(z in t){if(t[z].toUpperCase()===p[0].event.recurrence.frequency){p[0].event.recurrence.frequency="WEEKLY";break;}}}if(!p[0].event.reminders&&!s.setdefrem&&!s.partial){p[0].event.reminders={reminder:[]};}else{if(p[0].event.reminders&&p[0].event.reminders.reminder.length>0){for(z in p[0].event.reminders.reminder){if(p[0].event.reminders.reminder[z].email||Config.context=="groups"){p[0].event.reminders.reminder[z].sendEmail=true;}if(p[0].event.reminders.reminder[z].messenger){p[0].event.reminders.reminder[z].sendIM=true;}}}}if(p[0].event.allDay==="true"||p[0].event.allDay===true){p[0].event.startTime=p[0].event.startTime.split("T")[0];if(p[0].event.endTime){p[0].event.endTime=p[0].event.endTime.split("T")[0];}}x="/ws/v3/users/"+m+"/calendars/"+l+"/events/";if(s.partial){o="PATCH";}for(A in p){if(p[A].event.recurId){q=x+encodeURIComponent(p[A].event.uid)+"/instances/"+encodeURIComponent(p[A].event.recurId)+"/;";}else{if(s.split){q=x+encodeURIComponent(p[A].event.uid)+"/split/";}else{q=x+encodeURIComponent(p[A].event.uid)+"/;";}}}C=q+"?format=json&wssid="+Config.crumb;e(C,u,{method:o,headers:n,data:g.stringify(p[A])});},deleteEventsByUids:function(m,k){var p=(Config.owner)?Config.owner:Config.yid,n=m.length,l=0,o={success:function(q){l++;(l==n)&&k&&k.success&&k.success(q);},failure:function(q){k&&k.failure&&k.failure(q);}};for(i in m){sUrl="/ws/v3/users/"+p+"/calendars/events/"+encodeURIComponent(m[i])+"/;",e(sUrl+"?format=json&wssid="+Config.crumb,o,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});}},deleteEvents:function(m,p,o){var l,n=(Config.owner)?Config.owner:(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid,v=m.repeat,u=m.events.length,s={events:[]},t=this,k=[],q="",w,r;if(!Config.isTardisRW){return b.superclass.deleteEvents.apply(t,[m,p,o]);}for(r in m.events){w=function(y){var x={success:function(z){s.events.push(m.events[y]);u--;if(u===0){p.success(s);}},failure:function(z){p.failure(z);}};return x;};l="/ws/v3/users/"+n+"/calendars/"+o+"/events/";switch(v){case"all":q=l+encodeURIComponent(m.events[r].event.uid)+"/;";break;case"single":if(m.events[r].event.rid){q=l+encodeURIComponent(m.events[r].event.uid)+"/instances/"+encodeURIComponent(m.events[r].event.rid)+"/;";}else{q=l+encodeURIComponent(m.events[r].event.uid)+"/;";}break;}e(q+k.join(";")+"?format=json&wssid="+Config.crumb,w(r),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}});}},replyRSVP:function(m,q,o){var n,s={success:function(t){t.responseText.invite=t.responseText.event;o.success(t);},failure:function(t){o.failure(t);}},l,p={},k;k=q.invite.event.simplify().event;if(k.recurrence&&k.recurrence.count){k.recurrence.numInstances=k.recurrence.count;delete k.recurrence.count;}for(i=0;i<k.attendees.count;i++){if(k.attendees.attendee[i].email==Prefs.yemail){k.attendees.attendee[i].partStat=q.invite.partStat;k.attendees.attendee[i].numGuests=q.invite.numGuests;k.attendees.attendee[i].comment=q.invite.xComment;break;}}if(!q.invite.reminders){k.reminders={reminder:[]};}else{if(q.invite.reminders&&q.invite.reminders.count>0){k.reminders={};k.reminders.reminder=[];for(j in q.invite.reminders.reminder){var r={};r.offset=q.invite.reminders.reminder[j].offset;if(q.invite.reminders.reminder[j].email){r.sendEmail=true;}if(q.invite.reminders.reminder[j].messenger){r.sendIM=true;}if(q.invite.reminders.reminder[j].showAlert){r.showAlert=true;}k.reminders.reminder.push(r);}}}if(k.recurrence&&k.recurrence.count){k.recurrence.numInstances=k.recurrence.count;}if(!m.recurid){l="/ws/v3/users/"+Config.yid+"/calendars/"+k.folderId+"/events/"+encodeURIComponent(m.uid)+"/?format=json&notify=true";}else{l="/ws/v3/users/"+Config.yid+"/calendars/"+k.folderId+"/events/"+encodeURIComponent(m.uid)+"/instances/"+encodeURIComponent(m.recurid)+"/?format=json&notify=true";}k.folderId=q.invite.folderId;q={};q.event=k;e(l+Config.authToken,s,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(q)},"replyRSVP");},updateRSVP:function(l,p,n){var m,r={success:function(t){n.success(t);},failure:function(t){n.failure(t);}},k,o={},s="&notify=true";o.rsvp={partStat:p.rsvp.partStat,numGuests:p.rsvp.numGuests,comment:p.rsvp.guestComment,email:p.rsvp.attendeeEmail};m="&invitee="+Config.args.e+"&hh="+Config.args.hh;if(Config.yid){m=Config.authToken+m;s="&notify=false";}if(l.recurId){k="/ws/v3/users/"+l.organizer+"/rsvp/"+encodeURIComponent(l.uid)+"/instances/"+encodeURIComponent(l.recurId)+"/?format=json"+s;}else{k="/ws/v3/users/"+l.organizer+"/rsvp/"+encodeURIComponent(l.uid)+"/?format=json"+s;}e(k+m,r,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(o)},"updateRSVP");if(p.rsvp.addToCalendar&&Config.yid!=null){var q="";if(l.recurId){q="/instances/"+encodeURIComponent(l.recurId);}if(p.rsvp.srcFolderId){k="/ws/v3/users/"+Config.yid+"/calendars/"+p.rsvp.srcFolderId+"/events/"+encodeURIComponent(l.uid)+q+"?format=json";method="PUT";}else{k="/ws/v3/users/"+Config.yid+"/calendars/"+p.rsvp.folderId+"/events/?format=json";method="POST";}event=p.rsvp.event.simplify().event;if(event.recurrence&&event.recurrence.count){event.recurrence.numInstances=event.recurrence.count;delete event.recurrence.count;}for(i=0;i<event.attendees.count;i++){if(event.attendees.attendee[i].email==Prefs.yemail){event.attendees.attendee[i].partStat=p.rsvp.partStat;event.attendees.attendee[i].numGuests=p.rsvp.numGuests;event.attendees.attendee[i].comment=p.rsvp.guestComment;break;}}event.folderId=p.rsvp.folderId;o={};o.event=event;e(k+Config.authToken,{success:null,failure:null},{method:method,headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(o)},"updateRSVP");}},getSharedCalendars:function(n,k){var m="/ws/v3/users/",l={success:function(t){var s=[],q,r,p;if(t.responseText!==undefined){q=t.responseText.folders.count;r=t.responseText.folders.folder;for(p in r){s.push({id:r[p].id,name:r[p].name,type:r[p].type,lang:r[p].lang,isRemShareAllowed:r[p].isRemShareAllowed});}k.success(s,q);}else{k.failure();}},failure:function(p){k.failure(p);}};e(m+n+"/calendars/?format=json&wssid="+Config.crumb,l,null);},createFolder:function(l,k){var n=(Config.owner)?Config.owner:Config.yid,o="/ws/v3/users/"+n+"/calendars/",p=this,m={success:function(q){if(q.responseText.folder){k.success(q.responseText.folder);}},failure:function(q){k.failure(q);}};if(!Config.isTardisRW&&!(Config.cfg.isCorp&&l.folder.reminderSettings)){return b.superclass.createFolder.apply(p,[l,k]);}if(l.folder.folderCheck){if(l.folder.folderCheck=="check"){l.folder.isActive=true;}else{if(l.folder.folderCheck=="uncheck"){l.folder.isActive=false;}}delete l.folder.folderCheck;}if(l.folder.reminderSettings){p.processRemSettings(l.folder.reminderSettings);}e(o+"?format=json&wssid="+Config.crumb,m,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(l)});},editFolder:function(u,m,q){var s=this,o=(Config.owner)?Config.owner:Config.yid,l="/ws/v3/users/"+o+"/calendars/"+m.folder.id,p=false,k="PATCH",t={success:function(w){if(w.responseText.folder){q.success(w.responseText.folder);}},failure:function(w){q.failure(w);}};if(!Config.isTardisRW&&!(Config.cfg.isCorp&&m.folder.reminderSettings)){return b.superclass.editFolder.apply(s,[u,m,q]);}if(u){var n=u+"Token";m.folder[n]="reset";}if(m.folder.folderCheck){if(m.folder.folderCheck=="check"){m.folder.isActive=true;}else{if(m.folder.folderCheck=="uncheck"){m.folder.isActive=false;}else{if(m.folder.folderCheck=="sync"){p=true;}}}delete m.folder.folderCheck;}if(m.folder.grants){var v=m.folder.grants,r;for(r=v.length;r--;){if(v[r].action&&v[r].action=="R"){v.splice(r,1);}}if(v.length==0){v[0]="";}m.folder.grants=v;}if(p){k="GET";if(m.folder.url){k="PUT";l+="/refresh";}delete m.folder.url;}if(m.folder.reminderSettings){s.processRemSettings(m.folder.reminderSettings);}e(l+"/?format=json&wssid="+Config.crumb,t,{method:k,headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(m)});},deleteFolder:function(l,k){var n=(Config.owner)?Config.owner:Config.yid,o="/ws/v3/users/"+n+"/calendars/"+l.id,p=this,m={success:function(q){k.success(q.responseText);},failure:function(q){k.failure(q);}};if(!Config.isTardisRW&&!Config.cfg.isCorp){return b.superclass.deleteFolder.apply(p,[l,k]);}if(l.type!=="folder"){o+="/events";}o+="/?format=json&wssid="+Config.crumb;e(o,m,{method:"DELETE",headers:{"Content-Type":"application/json"}});},processRemSettings:function(k){if(k&&k.sendMessenger){k.sendIM=k.sendMessenger;}if(k&&k.sendMobile){k.sendSMS=k.sendMobile;}},processOptionsData:function(k){if(k.options.reminderSettings.defaultEmail){k.options.reminderDefaultEmail=k.options.reminderSettings.defaultEmail;}if(k.options.reminderSettings.defaultOffsets){k.options.reminderDefaultOffsets=k.options.reminderSettings.defaultOffsets;}if(k.options.reminderSettings.sendEmail){k.options.reminderDefaultSendEmail=k.options.reminderSettings.sendEmail;}if(k.options.reminderSettings.sendIM||k.options.reminderSettings.sendMessenger){if(k.options.reminderSettings.sendIM){k.options.reminderDefaultSendMessenger=k.options.reminderSettings.sendIM;}else{if(k.options.reminderSettings.sendMessenger==="true"||k.options.reminderSettings.sendMessenger===true){k.options.reminderSettings.sendMessenger=true;}else{k.options.reminderSettings.sendMessenger=false;}k.options.reminderDefaultSendMessenger=k.options.reminderSettings.sendMessenger;}}if(k.options.reminderSettings.showAlert){k.options.reminderDefaultShowAlert=k.options.reminderSettings.showAlert;}else{k.options.reminderDefaultShowAlert=false;}if(k.options.reminderSettings.sendSMS||k.options.reminderSettings.sendMobile){if(k.options.reminderSettings.sendSMS){k.options.reminderDefaultSendMoblie=k.options.reminderSettings.sendSMS;}else{if(k.options.reminderSettings.sendMobile==="true"||k.options.reminderSettings.sendMobile===true){k.options.reminderSettings.sendMobile=true;}else{k.options.reminderSettings.sendMobile=false;}k.options.reminderDefaultSendMoblie=k.options.reminderSettings.sendMobile;}}return k;},getGrpOptions:function(n,k){var o=this;var m="/ws/v3/users/"+Config.args.eid+"/options",l={success:function(q){var p={};if(q.responseText&&q.responseText.options){p.options=q.responseText.options;p=o.processOptionsData(p);}k.success(p);},failure:function(p){k.failure(p);}};e(m+"?format=json&wssid="+Config.crumb,l,null);},getOptions:function(o,k){var p=this;var m=(Config.owner)?Config.owner:Config.yid,n="/ws/v3/users/"+m+"/options",l={success:function(r){var q={};if(r.responseText&&r.responseText.options){q.options=r.responseText.options;q=p.processOptionsData(q);}k.success(q);},failure:function(q){k.failure(q);}};e(n+"?format=json&wssid="+Config.crumb,l,null);},getMailUserData:function(l){var m="?getMailUserData&appid=YahooMailOptions&wssid="+Config.wssid,k;if("_asrv" in Config.args){m=m+"&_asrv="+Config.args._asrv;}k=e(m,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},getWeather:function(l){var k=e("?weather&lang="+Config.lang,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},searchInterestingCals:function(n,l){var m="/ws/v3/services/discovery/search?"+n.dUrl+"intl=en&wssid="+Config.crumb,k=e(m,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},getSportsSearchTags:function(l,m){var n="?upcomingSports&stHash="+m,k=e(n,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},getUpcomingSports:function(n,l){var m="/ws/v3/services/discovery/personal?lang="+Config.lang+"&location="+n.locationName+"&wssid="+Config.crumb,k=e(m,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},getInterestingCalendars:function(n,l){var m="/ws/v3/services/discovery/?"+n.dUrl+"intl=en&wssid="+Config.crumb,k=e(m,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},getGroupsDiscoveryData:function(n,l){var m="/ws/v3/services/discovery/personal?df_cat=grp&wssid="+Config.crumb,k=e(m,l,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});return k;},setDefaultsOptionsData:function(k){if(!k.options.reminderSettings){k.options.reminderSettings={};}if(k.options.reminderDefaultEmail){k.options.reminderSettings.defaultEmail=k.options.reminderDefaultEmail;delete k.options.reminderDefaultEmail;}if(k.options.reminderDefaultOffsets){k.options.reminderSettings.defaultOffsets=k.options.reminderDefaultOffsets;delete k.options.reminderDefaultOffsets;}else{k.options.reminderSettings.defaultOffsets=[""];}if(k.options.reminderDefaultSendEmail){k.options.reminderSettings.sendEmail=k.options.reminderDefaultSendEmail;delete k.options.reminderDefaultSendEmail;}else{k.options.reminderSettings.sendEmail=false;}if(k.options.reminderDefaultSendMessenger){k.options.reminderSettings.sendIM=k.options.reminderDefaultSendMessenger;delete k.options.reminderDefaultSendMessenger;}else{k.options.reminderSettings.sendIM=false;}if(k.options.reminderDefaultShowAlert){k.options.reminderSettings.showAlert=k.options.reminderDefaultShowAlert;delete k.options.reminderDefaultShowAlert;}else{k.options.reminderSettings.showAlert=false;}if(k.options.reminderDefaultSendMoblie){k.options.reminderSettings.sendSMS=k.options.reminderDefaultSendMoblie;delete k.options.reminderDefaultSendMoblie;}else{k.options.reminderSettings.sendSMS=false;}return k;},updateGrpOptions:function(l,k){var q=this;var o="/ws/v3/users/"+Config.args.eid+"/options",p={},q=this,m,n={success:function(r){k.success();},failure:function(r){k&&k.failure&&k.failure(r);}};if(!Config.isTardisRW){return b.superclass.updateOptions.apply(q,[l,k]);}l.options=l.Options;delete l.Options;l=q.setDefaultsOptionsData(l);e(o+"?format=json&wssid="+Config.crumb,n,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},data:g.stringify(l)});},updateOptions:function(l,k){var r=this;var o=(Config.owner)?Config.owner:Config.yid;var p="/ws/v3/users/"+o+"/options",q={},r=this,m,n={success:function(s){k.success();},failure:function(s){k&&k.failure&&k.failure(s);}};if(!Config.isTardisRW){return b.superclass.updateOptions.apply(r,[l,k]);}l.options=l.Options;delete l.Options;l=r.setDefaultsOptionsData(l);e(p+"?format=json&wssid="+Config.crumb,n,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},data:g.stringify(l)});},getTodos:function(p,s){var v=this,l="/ws/v2/todos/",w={success:function(z){var y={};if(p!==null){if(p.dtstart!==undefined&&p.dtend!==undefined){y.startDate=p.dtstart;y.endDate=p.dtend;}}y.todos=[];if(z.responseText.todos.todo){y.todos=z.responseText.todos.todo;}s.success(y);},failure:function(y){s.failure(y);}},k=[],x,t,u="",r="",o=Config.yid,n="status=open",m="",q="";if(p&&p.st&&p.st!=null){return b.superclass.getTodos.apply(v,[p,s]);}if(v.filterFolders){u="folderids="+h.Object.keys(v.filterFolders).join(",");k.push(u);}if(Config.owner){o=Config.owner;}if(Config.args.eid&&Config.args.efid){o=Config.args.eid;}if(p!==null){if(p.fid){m="/"+encodeURIComponent(p.fid);}if(p.dtstart===undefined&&p.dtend===undefined){if(p==="allNotDone"){n="status=open";}else{if(p==="done"){n="status=completed";}}}else{if(p.st&&p.st!=null){r="&st="+encodeURIComponent(p.st);}for(x in p){if(x!=="st"){k.push(x+"="+encodeURIComponent(p[x].toString("yyyyMMdd")));}}}}if(k.length>0){q="&"+k.join("&");}e("/ws/v3/users/"+o+"/calendars"+m+"/todos?"+n+"&format=json"+Config.authToken+q+r,w,null,"getTodos");},addTodo:function(l,k,q){var r=this,p,n={success:function(s){p={todos:[]};if(s.responseText.todo){p.todos.push(s.responseText.todo);k.success(p);}},failure:function(s){k.failure(s);}},o="",m=(Config.owner)?Config.owner:(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid;if(!Config.isTardisRW){return b.superclass.addTodo.apply(r,[l,k,q]);}o="/ws/v3/users/"+m+"/calendars/"+l.todo.folderId+"/todos/?format=json&wssid="+Config.crumb;e(o,n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(l)});},updateTodo:function(n,q,r){var m="",o=(Config.owner)?Config.owner:(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid,v=n.length,s={todos:[]},t,w={success:function(y){if(y.responseText.todo){s.todos.push(y.responseText.todo);}v--;if(v===0){q.success(s);}},failure:function(y){q.failure(y);}},u=this,l=[],x,p="",k="PUT";if(!Config.isTardisRW){return b.superclass.updateTodo.apply(u,[n,q,r]);}for(t in n){if(r.folderMoveInfo[t]&&r.folderMoveInfo[t].src_folder_id&&r.folderMoveInfo[t].target_folder_id){p=r.folderMoveInfo[t].src_folder_id;}else{p=n[t].todo.folderId;}m="/ws/v3/users/"+o+"/calendars/"+p+"/todos/";k=(n[t].todo.summary)?"PUT":"PATCH";if(k==="PATCH"){if(n[t].todo.status&&(n[t].todo.status==="NEEDS_ACTION")){if(n[t].todo.completedOn){delete n[t].todo.completedOn;}}}e(m+encodeURIComponent(n[t].todo.uid)+"/?format=json&wssid="+Config.crumb,w,{method:k,headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(n[t])});}},deleteTodo:function(p,k,l){var o="",n=(Config.owner)?Config.owner:(Config.args.eid&&Config.args.efid)?Config.args.eid:Config.yid,q=this,m={success:function(){k.success();},failure:function(r){k.failure(r);}};if(!Config.isTardisRW){return b.superclass.deleteTodo.apply(q,[p,k,l]);}o="/ws/v3/users/"+n+"/calendars/"+l.fid+"/todos/";e(o+encodeURIComponent(p.uid)+"/?format=json&wssid="+Config.crumb,m,{method:"DELETE",headers:{"Content-Type":"application/json"}});},addNote:function(l,o,k){var n="/ws/v3/users/"+Config.yid+"/calendars/"+o.folderId+"/journals/?wssid="+Config.crumb,m={success:function(p){p.responseText.RESPONSE={};p.responseText.RESPONSE.CODE=0;p.responseText.RESPONSE.VALUE=p.responseText.journal;k.success(p);},failure:function(p){p.responseText.RESPONSE={};if(p.responseText.calendarError&&p.responseText.calendarError.code){p.responseText.RESPONSE.CODE=p.responseText.calendarError.code;}k.failure(p);}};e(n,m,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(l)},"addNote");},updateNote:function(m,p,k){var o="/ws/v3/users/"+Config.yid+"/calendars/"+p.folderId+"/journals/"+p.uid+"/?wssid="+Config.crumb+"&RETURN_R=Y&RETURN_COMPONENT=true&format=json",l="",n={success:function(q){q.responseText.RESPONSE={};q.responseText.RESPONSE.CODE=0;q.responseText.RESPONSE.VALUE=q.responseText.journal;k.success(q);},failure:function(q){q.responseText.RESPONSE={};if(q.responseText.calendarError&&q.responseText.calendarError.code){q.responseText.RESPONSE.CODE=q.responseText.calendarError.code;}k.failure(q);}};if(p.folderNew){m.journal.folderId=p.folderNew;}m.journal.uid=p.uid;e(o,n,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},data:g.stringify(m)},"updateNote");},deleteNote:function(p,k){var m=p.uid,l=p.folderId;var o="/ws/v3/users/"+Config.yid+"/calendars/"+l+"/journals/"+p.uid+"/?wssid="+Config.crumb+"&uid="+m,n={success:function(q){q.responseText.RESPONSE={};q.responseText.RESPONSE.CODE=0;k.success(q);},failure:function(q){q.responseText.RESPONSE={};if(q.responseText.calendarError&&q.responseText.calendarError.code){q.responseText.RESPONSE.CODE=q.responseText.calendarError.code;}k.failure(q);}};e(o,n,{method:"DELETE",headers:{"Content-Type":"application/json"},data:""},"deleteNote");},searchNotes:function(l,k){this.getJournals({search:l},k);},getJournals:function(o,k){var p=this,m={success:function(t){var r={},s=[];r.RESPONSE={};if(t.responseText!==undefined&&(t.responseText.journals||t.responseText.calendaritems)){if(t.responseText.journals){s=t.responseText.journals.journal;}else{s=t.responseText.calendaritems.journals||[];}r.RESPONSE.CODE=0;r.RESPONSE.VALUE=[];for(var q in s){r.RESPONSE.VALUE[q]={};r.RESPONSE.VALUE[q].UID=s[q].uid;r.RESPONSE.VALUE[q].FOLDER_ID=s[q].folderId;r.RESPONSE.VALUE[q].SUMMARY=s[q].summary;r.RESPONSE.VALUE[q].DESCRIPTION=s[q].description;}t.responseText=r;k.success(t);}else{r.RESPONSE.CODE=t.responseText.calendarError.code;t.responseText=r;k.success(t);}},failure:function(q){k.failure(q);}},n=(o.fid)?o.fid:"";var l="";if(o.search){e("/ws/v3/users/"+Config.yid+"/items?format=json&kw="+o.search+"&count=200&type=Journal&wssid="+Config.crumb,m,null,"getJournals");}else{e("/ws/v3/users/"+Config.yid+"/calendars/"+n+"/journals/?wssid="+Config.crumb+"&format=json",m,null,"getJournals");}},getFreeBusy:function(n,l){var m="/ws/v3/users/"+n.attendee+"/calendars/events/?format=json&wssid="+Config.crumb+"&dtstart="+n.startTime+"&dtend="+n.endTime+"&fieldGroup=FBS&partial=true&active=false";if(n.self&&n.self===true){m+="&local=true";}var k=e(m,l,{method:"GET",email:n.email,headers:{Accept:"application/json","Content-Type":"application/json"}});return k;}});h.namespace("calendar.model");h.calendar.model.calServiceTardis=new b();},"1.0.0",{requires:["lib-net","json","json-stringify","lib-utils-stats","calendar-model-calservice"]});/*
YUI 3.11.0 (build d549e5c)
Copyright 2013 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("arraylist",function(e,t){function s(t){t!==undefined?this._items=e.Lang.isArray(t)?t:n(t):this._items=this._items||[]}var n=e.Array,r=n.each,i;i={item:function(e){return this._items[e]},each:function(e,t){return r(this._items,function(n,r){n=this.item(r),e.call(t||n,n,r,this)},this),this},some:function(e,t){return n.some(this._items,function(n,r){return n=this.item(r),e.call(t||n,n,r,this)},this)},indexOf:function(e){return n.indexOf(this._items,e)},size:function(){return this._items.length},isEmpty:function(){return!this.size()},toJSON:function(){return this._items}},i._item=i.item,e.mix(s.prototype,i),e.mix(s,{addMethod:function(e,t){t=n(t),r(t,function(t){e[t]=function(){var e=n(arguments,0,!0),i=[];return r(this._items,function(n,r){n=this._item(r);var s=n[t].apply(n,e);s!==undefined&&s!==n&&(i[r]=s)},this),i.length?i:this}})}}),e.ArrayList=s},"3.11.0",{requires:["yui-base"]});
