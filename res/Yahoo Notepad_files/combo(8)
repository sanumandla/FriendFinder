YUI.add("_shared_module_calendar_toolbar",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_toolbar={base:'<div id = "toolbar-container">{{add_event_todo}}<div class="commontasks shaded"> <span class="ie7dummy tb-today"> </span> <span class="btn left right no-icon tb-today"><a href="#" data-action="calendar-today" title="{{str_tt_cal_hdr_today}}">{{str_cal_hdr_today}}</a></span> <span class="bevel_divider tb-today"></span> <span class="ie7dummy"> </span> <span class="btn left no-icon"><a href="#" data-action="calendar-view-day" title="{{str_tt_cal_toolbar_day}}">{{str_cal_toolbar_day}}</a></span><span class="btn no-icon"><a href="#" data-action="calendar-view-week" title="{{str_tt_cal_toolbar_week}}">{{str_cal_toolbar_week}}</a></span><span class="btn no-icon"><a href="#" data-action="calendar-view-month" title="{{str_tt_cal_toolbar_month}}">{{str_cal_toolbar_month}}</a></span><span class="btn no-icon"><a href="#" data-action="calendar-view-year" title="{{str_tt_cal_toolbar_year}}">{{str_cal_toolbar_year}}</a></span><span class="btn right no-icon"><a data-action="calendar-view-list" title="{{str_tt_cal_toolbar_list}}" href="#">{{str_cal_toolbar_list}}</a></span> {{view_button}} <span class="bevel_divider"></span> <span class="ie7dummy"> </span> <span class="btn left right menu" id="cal-action-span"><a href="#" id="btn-cal-action" data-action="menu" title="{{str_tt_cal_toolbar_actions}}">{{str_cal_toolbar_actions}} <b></b></a></span></div>{{timezone}}</div>',add_event_todo:'<div class="switcher shaded"> <span class="ie7dummy"> </span> <span class="btn left right" id="cal-add-event-span"><a href="#" data-action="add-event" title="{{str_tt_cal_toolbar_addevent}}">{{str_cal_toolbar_addevent}}</a></span> <span class="btn left right" id="cal-add-todo-span"><a href="#" data-action="toolbar-add-todo" title="{{str_tt_cal_toolbar_todo}}">{{str_cal_toolbar_todo}}</a></span></div> <span class="divless_divider bevel_divider"></span>',view_button:'<span class="btn left right menu"><a href="#" id="btn-cal-show" data-action="menu" title="{{str_tt_cal_toolbar_show}}">{{str_cal_toolbar_show}} <b></b></a></span> ',timezone:'<div id="timezone-notify"> <span> <label class="regularl"><b>{{str_opt_calendar_time_zone}}</b></label> <label class="regularl"><b>{{tz}}</b></label> </span></div>'};},"1.0.0");YUI.add("_shared_module_calendar_leftpane",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_leftpane={base:""};},"1.0.0");YUI.add("_shared_module_calendar_todos",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_todos={base:'<div class="btn-bar"> <span class="btn small menu"><a id="btn-todoTypes-show" href="#">{{str_cal_mnu_alltodos}}<b></b></a></span>{{readOnlyTodosPanel}}</div><div id="todos-sidepane">{{itemLists}}{{lists}}</div>',readOnlyTodosPanel:'<span class="rht"><span class="btn small" href=""><input type="button" value="Add" id="btn-addtodolist" class="icon add" data-action="add-todo-list"></span></span>',isdone:"done",isdone1:"&#x2713;",reminder:"reminder",item1:'<li class="todo-btn {{isdone}}"><a href="#" data-action="todo-selected" data-uid="{{uid}}" data-fid="{{fid}}"><span class="cal-colour {{colour}}">{{isdone1}}</span>{{val}} <i class="{{reminder}}">{{due}}</i></a></li> ',itemLists:'<div class="items items-nav"> <ul> {{item1}} </ul></div>',expanded:"expanded",expanded_else:"collapsed",isdone2:"done",isReadOnly:"readOnly",isdone3:"&#x2713;",reminder1:"reminder",reminder2:'<span class="cal-icon-16 cal-sprite-16x16 icn-reminder"></span>',item:'<li class="todo-btn {{isdone2}} {{isReadOnly}}"><a href="#" data-action="todo-selected" data-uid="{{uid}}" data-fid="{{fid}}"><span class="cal-colour {{colour}}">{{isdone3}}</span>{{val}} <i class="{{reminder1}}">{{reminder2}}{{due}}</i></a></li> ',loadmore:'<div class="items-nav-btncap"><span class="btn small left right"><button>{{str_more}}</button></span></div>',lists:'<div class="items items-nav {{expanded}}{{expanded_else}}"><h2 class="legend"> <span class="label" tabindex=0 data-action="collapsable" data-menu="todo-list-context" data-fid="{{fid}}" data-readOnly="{{readOnly}}">{{list}} <span class="count">({{count}})</span></span> <span class="rht"> <span class="btn small left right"><input type="button" value="Add a to do item" class="icon add" data-action="add-todo"></span> </span></h2> <ul> {{item}} </ul>{{loadmore}}</div>'};},"1.0.0");YUI.add("_shared_module_calendar_base_fresh",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_base_fresh={base:'<div id="uh2"></div><div id="main"> <div id="toolbar"{{isFresh}}> {{_shared_module_calendar_toolbar}} </div> <div id="paneshell" class="withoutad"> <div id="shellnavigation" {{user_pref_width}}> {{_shared_module_calendar_leftpane}} <div id="toggle-nav-pane" class="fresh-tooltip-left" > <b class="toggle"> </b> </div> </div> <div id="shellcontent" {{user_pref_width1}}> <div class="view"> <div class="view-hd"></div> <div class="view-bd"></div> </div> </div> <div id="shellsidepane"> <div id="toggle-todo-pane" class="fresh-tooltip-right"> <b class="toggle"> </b> </div> {{_shared_module_calendar_todos}} </div> </div></div>',isFresh:'class="fresh-toolbar"',user_pref_width:'style="width:{{left_pane_width}}px;"',user_pref_width1:'style="left:{{left_pane_width}}px;"'};},"1.0.0",{requires:["_shared_module_calendar_toolbar","_shared_module_calendar_leftpane","_shared_module_calendar_todos"]});YUI.add("_shared_module_calendar_pim",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_pim={base:'<div class="nav-bar"> <div class="tabs"> <p class="offscreen" id="tablist-instr">{{str_tabs_screen_reader_instr}}</p> <ul id="tablist" class="tablist" role="tablist" aria-describedby="tablist-instr"> </ul> </div></div>'};},"1.0.0");YUI.add("minty_module_tabs_tab_fixed",function(a){a.namespace("ui.Templates");a.ui.Templates.minty_module_tabs_tab_fixed={base:'<li role="presentation" class="unremovable"><a data-action="navigate" href="{{tab_url}}" role="tab" id="{{tab_id}}"><b>{{tab_label}}</b></a></li> '};},"1.0.0");YUI.add("calendar-base-view",function(b){var c=b.lib.Utils,j=[],f=b.lib.utils.Stats,g,e,d,h=f.ultTracker;var a=function(k){var m=this,l={data:{value:null},rootNode:{writeOnce:true},tabTemplate:{value:b.ui.Templates.minty_module_tabs_tab_fixed},baseTemplate:{value:b.ui.Templates._shared_module_calendar_base_fresh},template:{value:b.ui.Templates._shared_module_calendar_pim}};b.augment(m,b.Attribute);m.addAttrs(l,k||{});};a.prototype={formatters:{no_tabs_else:function(n,k,l){var o=this,m={global_url_base:""};return c.substitute(l.get("template").no_tabs_else,m,o.formatters,null,strings,null,l);}},render:function(n){var q=this,o=q.get("data"),m=q.get("rootNode"),p=q.get("baseTemplate"),l=b.one("body"),k={};if(!Config.cfg.uh){m.addClass("omframe");}else{m.appendChild(b.Node.create(c.substitute(q.get("template").base,{},null,null,strings)));for(i in o.pimTabs){m.one("div.tabs ul").appendChild(b.Node.create(c.substitute(q.get("tabTemplate").base,{tab_label:o.pimTabs[i].label,tab_id:o.pimTabs[i].id||"",tab_url:o.pimTabs[i].url})));}m.one("#calTab").get("parentNode").addClass("active");}if(Config.cfg.isFresh){k.isFresh=p.isFresh;}m.appendChild(b.Node.create(c.substitute(p.base,k)));m.one("#paneshell").addClass("withoutsidepane");if(!Config.cfg.showPanels){m.one("#paneshell").addClass("withoutshellnavigation");Prefs.showFolderPanel=false;Prefs.showTodoPanel=false;}if(Config.context=="groups"){Prefs.showFolderPanel=false;}if(!Prefs.showFolderPanel){q.hideLeftPane();}else{!l.hasClass("hasLeftPane")&&l.addClass("hasLeftPane");}if(Config.product==="notepad"){Prefs.showTodoPanel=false;Prefs.showFolderPanel=true;b.one("#shellsidepane").setStyle("display","none");b.one("body").hasClass("hasRightPane")&&b.one("body").removeClass("hasRightPane");b.one("body").addClass("hasLeftPane");}if(!Prefs.showTodoPanel&&b.one("#shellsidepane")&&b.one("#shellsidepane").getStyle("display")!="none"){q.toggleRightPane();}else{if(Prefs.showTodoPanel){!l.hasClass("hasRightPane")&&l.addClass("hasRightPane");}}if(Config.product==="notepad"){if(Prefs.theme.split("-")[0]==="deep"){l.addClass("ds");}document.title=strings.str_cal_np_title_yahoo_notepad;}q.bindUI();},bindUI:function(){var n=this,m=n.get("rootNode").one("#shellnavigation"),l,k;for(k in j){b.detach(j[k]);}j=[];if(m){l=b.Node.create('<div id="rail-resize"></div>');b.one("#paneshell").append(l);l.setStyle("left",m.get("offsetWidth")-1);l.once("mouseover",function(){b.use("dd",function(p){var o=new p.DD.Drag({node:"#rail-resize"}).plug(p.Plugin.DDConstrained,{stickX:true});o.on("drag:drag",function(q){if(q.pageX<125||q.pageX>350){q.preventDefault();return false;}m.setStyle("width",q.pageX);p.one("#shellcontent").setStyle("left",q.pageX);});o.on("drag:end",function(q){p.fire("content:resize");});});});}todoToggle=b.one("#toggle-todo-pane");if(todoToggle){j.push(todoToggle.on("click",function(o){b.fire("shell:toggleRightPane");}));}j.push(b.on("shell:toggleRightPane",n.toggleRightPane,n));nagToggle=b.one("#toggle-nav-pane");if(nagToggle){j.push(nagToggle.on("click",function(o){b.fire("shell:toggleLeftPane");}));}j.push(b.on("shell:toggleLeftPane",n.toggleLeftPane,n));j.push(b.on("crossframe:toggleTabs",n.toggleTabs,n));n.setUpFreshToolTips();},hideLeftPane:function(){b.one("body").removeClass("hasLeftPane");},toggleTabs:function(l){var n=this,k=b.one("body"),m=k.hasClass("mailTabs");if(l.val=="1"&&!m){k.addClass("mailTabs");}if(l.val=="0"&&m){k.removeClass("mailTabs");}},toggleLeftPane:function(){var l=this,k=b.one("#shellnavigation");if(k){if(b.one("body").hasClass("hasLeftPane")){l.hideLeftPane();f.addCounter("leftPane:turnedOff");Prefs.showFolderPanel=false;l.fire("updatePref",{fp:false});}else{b.one("body").addClass("hasLeftPane");f.addCounter("leftPane:turnedOn");Prefs.showFolderPanel=true;l.fire("updatePref",{fp:true});}}h({key:"toggleCalPane"},false);b.fire("content:resize");},toggleRightPane:function(){var o=this,n=b.one("#toggle-todo-pane"),k=b.one("#todo-pane"),l=b.one("#shellcontent"),m;if(k){if(!b.one("body").hasClass("hasRightPane")){b.one("body").addClass("hasRightPane");f.addCounter("todosPanel:turnedOn");Prefs.showTodoPanel=true;o.fire("updatePref",{tp:true});}else{b.one("body").removeClass("hasRightPane");f.addCounter("todosPanel:turnedOff");Prefs.showTodoPanel=false;o.fire("updatePref",{tp:false});}}h({key:"toggleTodoPane"},false);b.fire("content:resize");},setUpFreshToolTips:function(){var k={};b.use("lib-ui-tooltips-widget","widget-anim","_shared_module_offscreen_bin_tooltip_cal_postcard_left","_shared_module_offscreen_bin_tooltip_cal_postcard_right","_shared_module_offscreen_bin_tooltip_postcard",function(o){var l=ToolTipLeft=ToolTipRight=o.lib.ui.ToolTips,n=["_shared_module_offscreen_bin_tooltip_cal_postcard_left","_shared_module_offscreen_bin_tooltip_cal_postcard_right","_shared_module_offscreen_bin_tooltip_postcard"],m={shim:false,zIndex:100,position:"mouse",width:"150px",delay:{show:15,hide:50,auto:6000},render:true,autoHide:false};ToolTipLeft.TRIGGER_CLASS="fresh-tooltip-left";ToolTipLeft.TEXT="tooltip_text";ToolTipLeft.TEMPLATE=o.ui.Templates[n[0]].base;m.trigger=".fresh-tooltip-left";g=new ToolTipLeft(m).plug(o.Plugin.WidgetAnim);g.get("boundingBox").setStyle("position","absolute");g.before("triggerEnter",function(q){var t=this,p=q.node,s=p?p.get("id"):"",r=p&&p.one(".toggle");if(s==="toggle-nav-pane"){if(o.one("body").hasClass("hasLeftPane")){r.setAttribute("title",strings.str_cal_hide_cal);}else{r.setAttribute("title",strings.str_cal_show_cal);}t.setCustomTriggerAttrs({correction:[5,5]});t.setTriggerContent(false,r);}});ToolTipRight.TRIGGER_CLASS="fresh-tooltip-right";ToolTipRight.TEXT="tooltip_text";ToolTipRight.TEMPLATE=o.ui.Templates[n[1]].base;m.trigger=".fresh-tooltip-right";e=new ToolTipRight(m).plug(o.Plugin.WidgetAnim);e.get("boundingBox").setStyle("position","absolute");e.before("triggerEnter",function(r){var v=this,q=r.node,u=q?q.get("id"):"",t=q&&q.one(".toggle"),p,s;if(u==="toggle-todo-pane"){p=o.one("body").hasClass("hasRightPane");if(p){t.setAttribute("title",strings.str_cal_hide_todo);}else{t.setAttribute("title",strings.str_cal_show_todo);}v.setTriggerContent(false,t);s=v.get("boundingBox").one(".fresh-tooltip-cont");if(p){v.setCustomTriggerAttrs({correction:[-(s.get("offsetWidth")+5),5]});}else{s.setStyles({"float":"right",position:"static",marginRight:"10px"});v.get("boundingBox").one("#fresh-tooltip-arrow-right").setStyle("right","5px");}}});l.TRIGGER_CLASS="fresh-tooltip";l.OFFSET_XY=[0,10];l.TEXT="tooltip_text";l.TEMPLATE=o.ui.Templates[n[2]].base;m.position="center";m.trigger=".fresh-tooltip";d=new l(m).plug(o.Plugin.WidgetAnim);d.get("boundingBox").setStyles({position:"absolute",zIndex:"50001"});d.before("triggerEnter",function(q){var r=this,p=q.node;if(p.getAttribute("data-action")=="cancel"){p.once("click",function(s){r.hide();});}if(p.one("#btn-todo-actions")||p.one('i[data-action="add-todo"]')){r.get("boundingBox").setStyle("textAlign","right");r.get("boundingBox").one(".tooltip-arrow").setStyle("left","88%");}else{r.get("boundingBox").setStyle("textAlign","center");r.get("boundingBox").one(".tooltip-arrow").setStyle("left","47.5%");}});o.on("shell:toggleLeftPane",function(p){g&&g.hide();});o.on("shell:toggleRightPane",function(p){e&&e.hide();});});},close:function(){var k=this;g.destroy();e.destroy();d.destroy();k.get("rootNode").empty();}};b.namespace("calendar.base");b.calendar.base.view=a;},"1.0.0",{requires:["node-base","attribute-base","lib-utils","lib-utils-stats","_shared_module_calendar_base_fresh","_shared_module_calendar_pim","minty_module_tabs_tab_fixed","lib-utils-stats"]});YUI.add("calendar-base-controller",function(d){var b=d.calendar.model.dataModel,a=[];var c=function(e){var g=this,f={rootNode:{value:null},type:{value:"private"},widget:{value:null}};d.augment(g,d.Attribute);g.addAttrs(f,e||{});d.augment(g,d.EventTarget);};c.prototype={process:function(){var g=this,f={},e;if(Config.ymv==4){f.pimTabs=[{label:strings.str_tabs_inbox,url:"http://mail.yahoo.com"},{label:strings.str_tabs_contacts,url:"http://mrd.mail.yahoo.com/contacts"},{label:strings.str_tabs_calendar,url:"http://calendar.yahoo.com",id:"calTab"}];}else{f.pimTabs=[{label:strings.str_tabs_mail,url:"http://mail.yahoo.com"},{label:strings.str_tabs_contacts,url:"http://address.yahoo.com"},{label:strings.str_tabs_calendar,url:"http://calendar.yahoo.com",id:"calTab"},{label:strings.str_tabs_notepad,url:"http://notepad.yahoo.com"}];}g.set("widget",new d.calendar.base.view({rootNode:g.get("rootNode"),data:f}));g.get("widget").render(g.get("type"));for(e in a){d.detach(a[e]);}a=[];a.push(g.get("widget").on("updatePref",g.updatePref,g));a.push(g.on("close",g.close,g));if(Config.cfg.srch){a.push(d.Global.on("ucs:verticalSearchAction",function(i){var h;if(i.details[0].query!==""){if(Config.product==="notepad"){b.searchNotes(i.query);}else{d.calendar.shell.resetPerspectives();d.calendar.shell.loadPerspective("base");if(h=d.one("#shellcontent")){d.use("lib-ui-toast",function(j){j.lib.ui.toast.show("loading",h);});}d.calendar.shell.loadPerspective("search",{query:i});}}}));}a.push(b.on("datamodel:dateChanging",function(i){var h=d.one("#shellcontent");if(h){d.use("lib-ui-toast",function(j){j.lib.ui.toast.show("loading",h);});}}));a.push(b.on("datamodel:eventsAvailable",function(h){d.use("lib-ui-toast",function(i){i.lib.ui.toast.close();});}));a.push(d.on("datamodel:searchEventsAvailable",function(h){d.use("lib-ui-toast",function(i){i.lib.ui.toast.close();});}));a.push(b.on("datamodel:notesAvailable",function(h){d.use("lib-ui-toast",function(i){i.lib.ui.toast.close();});}));a.push(b.on("datamodel:searchNotesAvailable",function(h){d.use("lib-ui-toast",function(i){i.lib.ui.toast.close();});}));a.push(b.on("datamodel:Exception",function(h){d.use("lib-ui-toast",function(i){i.lib.ui.toast.close();});}));},updatePref:function(h){var f={method:"POST",headers:{"Content-Type":"application/json"},data:d.JSON.stringify(h.details[0]),success:function(){d.fire("preferences:updated");},failure:function(){}},g=new d.lib.Net().exec(Config.docRoot+"?wssid="+Config.crumb+"&prefUp",f);},close:function(){var f=this,e;for(e in a){d.detach(a[e]);}a=[];f.get("widget").close();}};d.namespace("calendar.base");d.calendar.base.controller=c;},"1.0.0",{requires:["event-base","calendar-base-view","json","json-stringify","calendar-model-datamodel","lib-net"]});YUI.add("_shared_module_calendar_menu_help",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_menu_help={base:'<div id="menu-help" class="optionMenu"> <ul class="first"> {{blog}} {{upgrade}} </ul> <ul> <li data-action="help"><a href="{{str_cfg_url_help}}"><span>{{str_menu_help}}</span></a></li> </ul> {{send_feedback_menu}} <ul> <li data-action="link"><a href="{{str_cfg_url_tos}}"><span>{{str_menu_tos}}</span></a></li> <li data-action="link"><a href="{{str_cfg_url_privacy_policy}}"><span>{{str_menu_privacy_policy}}</span></a></li> {{ads}} </ul></div>',blog:'<li data-action="blog"><a href="{{str_cfg_url_ymail_blog}}"><span>{{str_menu_mail_blog}}</span></a></li> ',upgrade:'<li data-action="link"><a href="{{str_cfg_url_mailplus}}"><span>{{str_menu_mail_plus}}</span></a></li> ',send_feedback_menu:'<ul> <li data-action="link"><a href="{{report_problem_url}}" target="_blank" title="{{str_uh_send_feedback_attr}}"><span>{{str_uh_send_feedback}}</span></a></li> </ul> ',ads:'<li data-action="link"><a href="{{str_cfg_url_about_our_ads}}"><span>{{str_menu_about_our_ads}}</span></a></li> '};},"1.0.0");YUI.add("_shared_module_offscreen_bin_menus_calendar_options",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_offscreen_bin_menus_calendar_options={base:'<div id="menu-cal-options" class="optionMenu"> <ul> <li data-action="options"><a href="" title="{{str_opt_calendar_options}}"><span>{{str_opt_calendar_options}}</span></a></li> </ul></div>'};},"1.0.0");YUI.add("calendar-header-view",function(e){var c=e.lib.Utils,b=false,a=[];var d=function(f){var h=this,g={rootNode:{writeOnce:true},template:{value:e.ui.Templates._shared_module_calendar_menu_help},template_option:{value:e.ui.Templates._shared_module_offscreen_bin_menus_calendar_options}};e.augment(h,e.Attribute);h.addAttrs(g,f||{});e.augment(h,e.EventTarget);};d.prototype={formatters:{blog:function(h,f,g){var i=g;if(strings.str_cfg_tog_mailBlogEnabled){return c.substitute(g.get("template").blog,{},null,null,strings);}},send_feedback_menu:function(i,f,g){var j=g,h={};if(strings.str_cfg_tog_sendFeedbackEnabled){h={report_problem_url:strings.str_cfg_url_report_problem};return c.substitute(g.get("template").send_feedback_menu,h,null,null,strings);}},upgrade:function(h,f,g){var i=g;if(strings.str_cfg_tog_mailUpgradeEnabled){return c.substitute(g.get("template").upgrade,{},null,null,strings);}}},render:function(){var i=this,f=i.get("rootNode"),h,g;f.set("innerHTML",Config.uh.html);g=f.one("button.yucs-sprop-btn");if(!Config.cfg.srch&&g){g.get("parentNode").remove();}if(Config.product==="notepad"){if(!b){e.once("PageStamped",function(){c.loadScript(Config.uh.script,function(){b=true;if(Config.cfg.srch){if(ucs.YObj){ucs.YObj.use("ucs-menu-utils","ucs-search",function(j){ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_np_uh_search);});}else{ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_np_uh_search);}}});});}else{if(Config.cfg.srch){c.loadScript(Config.uh.script,function(){if(ucs.YObj){ucs.YObj.use("ucs-menu-utils","ucs-search",function(j){ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_np_uh_search);});}else{ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_np_uh_search);}});}}}else{if(!b){e.once("PageStamped",function(){c.loadScript(Config.uh.script,function(){b=true;if(Config.cfg.srch){if(ucs.YObj){ucs.YObj.use("ucs-menu-utils","ucs-search",function(j){ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_uh_search);});}else{ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_uh_search);}}});});}else{if(Config.cfg.srch){c.loadScript(Config.uh.script,function(){if(ucs.YObj){ucs.YObj.use("ucs-menu-utils","ucs-search",function(j){ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_uh_search);});}else{ucs.UhSearchInterface.setVertSearchBtnText(strings.str_cal_uh_search);}});}}}h=f.one("div.yuhead-logo h2 a");if(h){h.setAttribute("href","http://calendar.yahoo.com");}i.bindUI();},bindUI:function(){var g,k=this,h=false,f=false,j;for(g in a){e.detach(a[g]);}a=[];a.push(e.Global.once("ucs:userMenuShow",function(l){if(Config.cfg.isCorp){var i=e.one(".yucs-signout"),m;if(i){m=i.getAttribute("href");i.setAttribute("href","https://by.bouncer.login.yahoo.com/login/index.html?action=logout&done="+encodeURIComponent(m));}}}));j=function(){e.Lang.later(1000,null,function(){if(typeof Aniden!=="undefined"){Aniden.play();}else{j();}});};j();a.push(e.Global.once("ucs:helpMenuShow",function(i){e.log("help menu show");k.setUh2Dropdown(k,k.get("template"),"ucs:helpMenuItems");},k));if(Config.cfg.rw){a.push(e.Global.on("ucs:utilityMenuShow",function(i){e.log("utility menu show");if(!f&&(Config.product!=="notepad")){k.setUh2Dropdown(k,k.get("template_option"),"ucs:utilityMenuItems");f=true;}},k));}a.push(e.Global.on("ucs:utilityMenuItemClick",function(i){k.fire("header:optionsMenuClick");},k));},setUh2Dropdown:function(l,h,j,g){var f=c.substitute(h.base,null,l.formatters,null,strings,null,l),k=l.getMenuGroupsFromMarkup(f),i;i=new e.EventTarget();i.publish(j,{broadcast:2,emitFacade:true});i.fire(j,{menuGroups:k,reset:true});},getMenuGroupsFromMarkup:function(u){var i=/<ul(.*?)<\/ul>/gm,m=/<li(.*?)<\/li>/gm,h=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*title=(.)(.*?)\5\s*>(.*?)<\/a>/,n=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*>(.*?)<\/a>/,l,v,p,q,s,o=[],j=[];while(l=i.exec(u)){q=l[0];j=[];while(v=m.exec(q)){s=v[0];p=h.exec(s)||n.exec(s);if(p){var k=p[2],g=p[4],r=((p.length===8)&&p[6])||"",t=p[p.length-1],f={menuText:t};switch(k){case"newfeature":case"blog":case"help":case"link":f.actionType="link";f.url=g;f.target="_blank";break;default:f.actionType="customEvent";break;}f.actionData=k;j.push(f);}}j.length&&o.push(j);}return o;},hide:function(f){},show:function(f){},close:function(g){var f;for(f in a){e.detach(a[f]);}a=[];}};e.namespace("calendar.header");e.calendar.header.view=d;},"1.0.0",{requires:["node-base","node-event-delegate","attribute-base","event-base","lib-utils","_shared_module_calendar_menu_help","_shared_module_offscreen_bin_menus_calendar_options"]});YUI.add("calendar-header-controller",function(c){var a=[];var b=function(d){var f=this,e={rootNode:{value:null},widget:{value:null}};c.augment(f,c.Attribute);f.addAttrs(e,d||{});c.augment(f,c.EventTarget);};b.prototype={process:function(){var e=this,d;if(Config.cfg.uh===false){return;}e.set("widget",new c.calendar.header.view({rootNode:e.get("rootNode")}));for(d in a){c.detach(a[d]);}a=[];a.push(e.get("widget").on("header:optionsMenuClick",e.optionsMenuClickAction,e));a.push(e.on("hide",e.get("widget").hide,e.get("widget")));a.push(e.on("show",e.get("widget").show,e.get("widget")));a.push(e.on("close",e.close));e.get("widget").render();},optionsMenuClickAction:function(){c.calendar.shell.resetPerspectives();c.calendar.shell.loadPerspective("base");c.calendar.shell.loadPerspective("optionsGeneral");},close:function(){var e=this,d;for(d in a){c.detach(a[d]);}a=[];e.get("widget").close();}};c.namespace("calendar.header");c.calendar.header.controller=b;},"1.0.0",{requires:["event-base","calendar-header-view"]});YUI.add("perspective-base",function(b){var a=function(c){var f=this,e,d=function(){e=f.addPanel("panel.base",{rootNode:b.one("body")});e.addModule("base",e.getModule("base")||new b.calendar.base.controller(c));e=f.addPanel("panel.uh",{rootNode:b.one("#uh2")});e.addModule("uh",e.getModule("uh")||new b.calendar.header.controller(c));};b.mix(f,{load:d});};b.namespace("perspective");b.perspective.base=a;},"1.0.0",{requires:["event-base","calendar-base-controller","calendar-header-controller"]});YUI.add("lib-utils-menu",function(e){e.namespace("lib.Utils.Menu");var b=e.lib.Utils.Menu,d=e.lib.Utils;e.mix(b,{setupMenu:function(n,j,l,g,m){var f,i=j.get("rootNode"),h;var k=function(){f=new e.Overlay({contentBox:"#"+i.get("id"),visible:false,constrain:true,zIndex:4001,tabIndex:null});if(m){f.render(m);}else{f.render();}i.setStyle("display","block");var q=f.get("boundingBox"),p=f.get("contentBox");q.setAttrs({role:"menu","aria-labelledby":"#"+n.get("id")});q.all("a").set("role","menuitem");q.all("div,ul,li").set("role","presentation");p.plug(e.Plugin.NodeFocusManager,{descendants:"a",keys:{next:"down:40",previous:"down:38"},focusClass:{className:"menu-active-item",fn:function(r){return r.ancestor("li")||r;}},circular:true});p.focusManager.after("focusedChange",function(r){if(!r.newVal){this.set("activeDescendant",0);}});e.on("keydown",function(r){switch(r.keyCode){case 27:f.hide();n.focus();break;case 9:if(f.get("visible")){r.preventDefault();}break;}},[n,q]);f.after("visibleChange",function(s){var r=s.newVal;if(r&&p.focusManager){e.Lang.later(0,p.focusManager,p.focusManager.focus);}q.set("aria-hidden",(!r));});q.on("click",function(r){if(r.target.getAttribute("data-value")=="self-handled"){return;}else{j.fire("menu:selected",r.target.ancestor("[data-action]",true));if(p.focusManager){p.focusManager.blur();}f.hide();if(n&&g){n.focus();}}},i);q.delegate("mouseenter",function(s){var r=p.focusManager;if(r.get("focused")){r.focus(this.one("a"));}},"li");q.get("ownerDocument").on("mousedown",function(s){var r=s.target;if(!r.compareTo(n)&&!n.contains(r)&&!r.compareTo(q)&&!q.contains(r)){if(n&&f.get("visible")){n.focus();}f.hide();}});};i.setStyle("display","none");n.setAttrs({role:"button","aria-haspopup":true});if((e.UA.gecko||e.UA.ie)&&navigator.userAgent.indexOf("Windows")>-1){n.removeAttribute("href");e.on("key",function(p){n.simulate("click");},n,"down:13");}n.set("tabIndex",0);var o=function(p){var q;if(n.getAttribute("disabled")=="true"){p.preventDefault();return;}if(!f){k();}if(!f.get("visible")){if(l&&l=="center"){q=[e.WidgetPositionAlign.TC,e.WidgetPositionAlign.BC];}else{if(l&&l=="topright"){q=[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.TR];}else{if(l&&l=="bottomright"){q=[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BR];}else{q=[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL];}}}f.set("align",{node:n,points:q});a(f,j,p);}else{if(f.get("visible")){c(f,j,p);}}if(p){p.preventDefault();}};h=n.ancestor(".menu-block",true);if(h){h.on("click",o);}else{if(n.hasClass("submenu")){o();}else{n.on("click",o);}}},setupMultiMenu:function(f,i,k,l,p,m,h,q){var g,r,j=l.get("rootNode"),o=j.get("id");var n=function(){if(!j||!j._node){j=e.one("#"+o);}g=new e.Overlay({contentBox:"#"+j.get("id"),zIndex:4010,visible:false,constrain:true,tabIndex:null});g.render();j.setStyle("display","block");var u=g.get("boundingBox"),t=g.get("contentBox");u.setAttrs({role:"menu"});u.all("a").set("role","menuitem");u.all("div,ul,li").set("role","presentation");t.plug(e.Plugin.NodeFocusManager,{descendants:"a",keys:{next:"down:40",previous:"down:38"},focusClass:{className:"menu-active-item",fn:function(v){return v.ancestor("li")||v;}},circular:true});t.focusManager.after("focusedChange",function(v){if(q&&q.skipFocusManager){return;}if(!v.newVal){this.set("activeDescendant",0);}});e.on("keydown",function(v){switch(v.keyCode){case 27:c(g,l);if(r){r.focus();}if(v.target!==u){v.target.focus();}break;case 9:if(g.get("visible")){v.preventDefault();}break;}},[f,u]);g.after("visibleChange",function(w){var v=w.newVal;if(v&&t.focusManager){e.Lang.later(0,t.focusManager,t.focusManager.focus);}u.set("aria-hidden",(!v));});u.all(".submenu").on("mouseenter",function(v){l.fire("menu:mouseover",v.target.ancestor("[data-action]",true));},j);u.all(".submenu").on("mouseleave",function(v){l.fire("menu:mouseout",v.target.ancestor("[data-action]",true));},j);u.on("click",function(v){if(v.target.getAttribute("data-value")=="self-handled"){return;}else{if(v.target.ancestor("[data-action]",true).hasClass("submenu")){return;}else{if(v.target.ancestor("[data-action]",true).hasClass("subitemheader")){return;}else{l.fire("menu:selected",v.target.ancestor("[data-action]",true));if(t.focusManager){t.focusManager.blur();}c(g,l);if(r&&h){r.focus();}}}}},j);u.delegate("mouseenter",function(w){var v=t.focusManager;if(v.get("focused")){v.focus(this.one("a"));}},"li");u.get("ownerDocument").on("mousedown",function(w){var v=w.target;if(!v.compareTo(u)&&!u.contains(v)&&v.getAttribute("data-action")!=k){c(g,l);if(r){r.focus();}}});};j.setStyle("display","none");if(i){i.each(function(t){t.setAttrs({role:"button","aria-haspopup":true});});i.set("tabIndex",0);}var s=function(v,u){var w,t;if(u==="in-situ"){if(g){c(g,l);if(r){r.focus();}}return;}t=v.target;if(v.target.getAttribute("role")=="button"){r=v.target;}else{r=v.target.ancestor("[data-action]",true);}if(d.getDataAction(v).action!=k){return;}if(t.getAttribute("disabled")=="true"){v.preventDefault();return;}if(!g){n();}if(!g.get("visible")){if(!m){if(p&&p=="center"){w=[e.WidgetPositionAlign.TC,e.WidgetPositionAlign.BC];}else{w=[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL];}g.set("align",{node:t,points:w});}else{if(m==="in-situ"){w=[v.pageX,v.pageY];g.set("xy",w);}}a(g,l,v);}else{c(g,l);if(r){r.focus();}}v.preventDefault();};if(p!="onRightClick"){f.on("click",s);}else{f.on("contextmenu",s);f.on("click",function(t){s(t,"in-situ");});}}});var a=function(h,f,g){f.fire("menu:show",g);h.show();};var c=function(g,f){g.hide();f.fire("menu:hide");};},"1.0.0",{requires:["overlay","node-focusmanager","node-event-simulate"]});YUI.add("_shared_module_calendar_notepad_folderlist_rollup",function(a){a.namespace("ui.Templates");a.ui.Templates._shared_module_calendar_notepad_folderlist_rollup={base:' <div class="listnav-label primary-property-btn" data-action="new-note"> <i class="icon icon-compose-note"></i>{{str_cal_np_new_note}} </div> <div class="nav-separator"></div> <div id="notepadbook-inner-container"> <div class="items items-nav items-nav-notepad expanded" aria-expanded="false"> <ul role="navigation" aria-labelledby="nav-notelists"> <li class="notepad-list yui3-dd-drop" data-action="lists" data-fid="12"> <div class="lists-bg"> <input type="text" value="{{defaultFolderName}}" data-action="rename-list" class="yui3-ltr"> </div> <a href="#" title="{{defaultFolderName}}" dir="ltr" data-action="click-list">{{defaultFolderName}}</a> </li> <div class="nav-separator inner-list"></div> {{folder}} </ul> </div> <div id="add-new-list-inline" class="newListInline"> <input id="new-list-name-add" type="text" value="{{str_cal_np_new_folder}}"> </div> </div>',folder:'<li class="notepad-list yui3-dd-drop" data-action="lists" data-fid="{{fid}}"> <div class="lists-bg"> <input type="text" value="{{folderName}}" data-action="rename-list" class="yui3-ltr"> </div> <a href="#" title="{{folderName}}" dir="ltr" data-action="click-list">{{folderName}}</a> </li> '};},"1.0.0");